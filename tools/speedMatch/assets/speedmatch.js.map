{"version":3,"file":"speedmatch.js","sources":["speedmatch.js"],"sourcesContent":["/* *****************************************************************************\r\n *\r\n * Copyright (c) 2011 Xuld. All rights reserved.\r\n * \r\n * This source code is part of the SpeedMatch .\r\n * \r\n * This code is licensed under MIT license.\r\n * See the file License.html for the license details.\r\n * \r\n * \r\n * You must not remove this notice, or any other, from this software.\r\n *\r\n * \r\n * ******************************************************************************/\r\n\r\nvar current = null,\r\n\tLang = {\r\n\t\tcases: 'cases',\r\n\t\tsum: 'total'\r\n\t},\r\n\tdefaultOptions = {\r\n\t\ttime: 1000,     // times of each test case to run for.\r\n\t\trootPath: '',   // the directoy of test case file.\r\n\t\thtml: 'testcase.html',    //  the default html.\r\n\t\teclipseLength: 100,  //  If the length of code is greater than eclipseLength, it will be trimed.\r\n\t\ttimeout: 1000    // If .js file is not loaded, JPlus will wait for timeout * 10(times) ms.\r\n\t};\r\n\r\nif (location.search) {\r\n\twindow.onload = function () {\r\n\r\n\t\tvar url = location.search.substr(1);\r\n\t\tif (url.indexOf('&disableUrl=false') >= 0) {\r\n\t\t\turl = url.replace('&disableUrl=false', '');\r\n\t\t} else {\r\n\t\t\tdisableUrl();\r\n\t\t}\r\n\r\n\t\tdocument.getElementById('url').value = url;\r\n\r\n\r\n\t\topenTestCase(url);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * init speed match with the given test cases.\r\n * @param {Object} frameworks this should be an object like: {@code <<<{\r\n *  \t'test': {\r\n *  \t\tjs: '../libs/demo.js',  // the target js file\r\n *  \t\tcss: '', // the target css file\r\n *  \t\thtml: '', // the target css file\r\n *  \t\tinit:  function(window){\r\n *  \t\t\t// Callback to initialize the document.\r\n *  \t\t}\r\n *  \t}\r\n *  } >>>}\r\n * @param {Object} testcases all testcases represented by an object where the key is name of framework and the value is the string, which is going to be evaluted.\r\n * @param {Object} [options] this argument allows you to overwrite the default options.\r\n */\r\nfunction initSpeedMatch(frameworks, testcases, options) {\r\n\tcurrent = compile(frameworks, testcases, options);\r\n\tinitIFrame(current);\r\n\tinitTable(current);\r\n}\r\n\r\nArray.prototype.forEach = Array.prototype.forEach || function (value, bind) {\r\n\tfor (var i = 0; i < this.length; i++) {\r\n\t\tvalue.call(bind, this[i], i, this);\r\n\t}\r\n};\r\n\r\nfunction openTestCase(url) {\r\n\tstopSpeedMatch();\r\n\tdefaultOptions.rootPath = (url.match(/[\\S\\s]*\\//) || [\"\"])[0];\r\n\tappendScript(document, url);\r\n}\r\n\r\nfunction startSpeedMatch(row, cell) {\r\n\tif (!current)\r\n\t\treturn;\r\n\r\n\tvar cellMax = current[0].length, rowMax = current.length - 1, timeout = current.options.timeout;\r\n\tcurrent.timer = setInterval(function () {\r\n\t\tif (current.loadingCount && timeout-- > 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tif (cell < cellMax) {\r\n\t\t\ttestOne(row, cell);\r\n\t\t\tcell++;\r\n\t\t} else {\r\n\t\t\tupdateMatches(row);\r\n\t\t\trow++;\r\n\t\t\tif (row == rowMax) {\r\n\t\t\t\tsum();\r\n\t\t\t\treturn stopSpeedMatch();\r\n\t\t\t}\r\n\t\t\tcell = 1;\r\n\t\t}\r\n\t}, 10);\r\n\r\n}\r\n\r\nfunction stopSpeedMatch() {\r\n\tif (!current)\r\n\t\treturn;\r\n\tclearInterval(current.timer);\r\n}\r\n\r\nfunction compile(frameworks, testcases, options) {\r\n\tvar r = [[{ text: Lang.cases }]], map = {}, lastRow = [{ text: Lang.sum }];\r\n\r\n\tr.options = {};\r\n\toptions = options || r.options;\r\n\tfor (var item in defaultOptions)\r\n\t\tr.options[item] = item in options ? options[item] : defaultOptions[item];\r\n\r\n\tfor (var framework in frameworks) {\r\n\t\tmap[framework] = r[0].length;\r\n\t\tr[0].push({ text: framework, cfg: frameworks[framework] });\r\n\t\tlastRow.push({ text: framework, result: NaN });\r\n\t}\r\n\r\n\tfor (var testcase in testcases) {\r\n\r\n\t\tvar value = testcases[testcase],\r\n\t\t\tcs = [{ text: testcase }];\r\n\r\n\t\tif (value === '-' || value === undefined) {\r\n\t\t\tr.push(cs);\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tfor (var framework in value) {\r\n\t\t\tvar index = map[framework];\r\n\t\t\tif (index > 0) {\r\n\t\t\t\tcs[index] = {\r\n\t\t\t\t\ttext: value[framework]\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (value.time)\r\n\t\t\tcs[0].time = value.time;\r\n\r\n\t\tr.push(cs);\r\n\r\n\t}\r\n\r\n\tr.push(lastRow);\r\n\treturn r;\r\n\r\n\r\n}\r\n\r\nfunction initIFrame(current) {\r\n\r\n\tvar frameworks = current[0], frames = document.getElementById('frames');\r\n\r\n\temptyNode(frames);\r\n\r\n\tcurrent.loadingCount = 0;\r\n\r\n\tframeworks.forEach(function (value, index) {\r\n\t\tif (index == 0)\r\n\t\t\treturn;\r\n\r\n\t\t// initialize iframe.\r\n\t\tvar iframe = value.iframe = document.createElement('iframe');\r\n\r\n\t\tvalue = value.cfg;\r\n\r\n\t\tvar js = typeof value.js === 'string' ? [value.js] : value.js ? value.js.slice(0) : [];\r\n\r\n\t\tcurrent.loadingCount += 1 + (js ? js.length : 0);\r\n\r\n\t\tiframe.onload = function () {\r\n\t\t\tif (js.length)\r\n\t\t\t\tloadScript();\r\n\t\t\tcurrent.loadingCount--;\r\n\t\t};\r\n\r\n\t\tfunction loadScript() {\r\n\t\t\tvar script = js.shift();\r\n\t\t\tscript = appendScript(iframe.contentWindow.document, script);\r\n\t\t\tscript[-[1, ] ? 'onload' : 'onreadystatechange'] = function () {\r\n\t\t\t\tif (script.readyState === 'loading')\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcurrent.loadingCount--;\r\n\r\n\t\t\t\tif (js.length) {\r\n\t\t\t\t\tloadScript();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (value.init) {\r\n\t\t\t\t\tvalue.init(iframe.contentWindow);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tiframe.src = current.options.rootPath + (value.html || current.options.html);\r\n\t\tframes.appendChild(iframe);\r\n\r\n\r\n\t});\r\n\r\n}\r\n\r\nfunction initTable(current) {\r\n\tvar table = document.getElementById('testcases'), tr, td;\r\n\r\n\temptyNode(table);\r\n\ttable = table.appendChild(document.createElement('tbody'));\r\n\r\n\tcurrent.forEach(function (value, index) {\r\n\t\ttr = document.createElement('tr');\r\n\t\tif (0 === index || current.length === index + 1) {\r\n\t\t\tvalue.forEach(function (framework, index) {\r\n\t\t\t\ttd = document.createElement('th');\r\n\t\t\t\ttd.innerHTML = htmlEncode(framework.text);\r\n\t\t\t\ttr.appendChild(td);\r\n\t\t\t});\r\n\t\t} else if (value.length === 1) {\r\n\t\t\ttd = document.createElement('th');\r\n\t\t\ttd.colSpan = current[0].length;\r\n\t\t\ttd.innerHTML = htmlEncode(value[0].text);\r\n\t\t\ttd.className = 'testcase';\r\n\t\t\ttr.appendChild(td);\r\n\t\t} else {\r\n\t\t\tvalue.forEach(function (testcase, index) {\r\n\t\t\t\tif (testcase) {\r\n\t\t\t\t\ttd = document.createElement('td');\r\n\t\t\t\t\tif (0 === index) {\r\n\t\t\t\t\t\ttd.innerHTML = htmlEncode(testcase.text);\r\n\t\t\t\t\t\ttd.className = 'testcase';\r\n\t\t\t\t\t\ttd.ondblclick = onRowDblClick;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttd.title = testcase.text;\r\n\t\t\t\t\t\ttd.ondblclick = onCellDblClick;\r\n\t\t\t\t\t\ttd.innerHTML = htmlEncode(eclipse(testcase.text, current.options.eclipseLength));\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.appendChild(td);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\ttable.appendChild(tr);\r\n\t});\r\n\r\n\r\n\r\n}\r\n\r\nfunction emptyNode(elem) {\r\n\twhile (elem.lastChild)\r\n\t\telem.removeChild(elem.lastChild);\r\n}\r\n\r\nfunction appendScript(document, url) {\r\n\tvar script = document.createElement('script');\r\n\tscript.type = 'text/javascript';\r\n\tscript.src = url;\r\n\t(document.getElementsByTagName('head')[0] || document).appendChild(script);\r\n\treturn script;\r\n}\r\n\r\n/**\r\n * Start test one case.\r\n * @param {Number} row the row index.\r\n * @param {Number} column the column index.\r\n */\r\nfunction testOne(row, column) {\r\n\tvar cell = current[row];\r\n\tif (!cell)\r\n\t\treturn;\r\n\tcell = cell[column];\r\n\tif (!cell || cell.text === '-')\r\n\t\treturn;\r\n\tvar time = current[row][0].time || current.options.time,\r\n\t\tiframe = current[0][column].iframe;\r\n\r\n\ttry {\r\n\t\tiframe.contentWindow.eval('var __timer = new Date(), __times = ' + time + '; while(__times--){' + cell.text + '} __timer = new Date() - __timer;');\r\n\t\ttime = iframe.contentWindow.__timer;\r\n\t} catch (e) {\r\n\t\ttime = e;\r\n\t}\r\n\tvar td = document.getElementById('testcases').rows[row].cells[column];\r\n\ttd.innerHTML = '<span class=\"time\">' + time + '</span> |' + htmlEncode(eclipse(cell.text, current.options.eclipseLength));\r\n\tif (typeof time !== 'number') {\r\n\t\ttd.className = 'error';\r\n\t} else {\r\n\t\tcell.result = time;\r\n\t}\r\n\r\n\r\n}\r\n\r\nfunction eclipse(v, count) {\r\n\treturn v.length > count ? v.substr(0, count) + \"...\" : v;\r\n}\r\n\r\nfunction htmlEncode(value) {\r\n\treturn value && value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r?\\n/g, \"<br>\").replace(/ /g, \"&nbsp;\");\r\n}\r\n\r\nfunction onCellDblClick(e) {\r\n\te = e || window.event;\r\n\tvar td = e.target || e.srcElement;\r\n\twhile (td.tagName != 'TD')\r\n\t\ttd = td.parentNode;\r\n\r\n\ttestOne(td.parentNode.rowIndex, td.cellIndex);\r\n\tupdateMatches(td.parentNode.rowIndex);\r\n}\r\n\r\nfunction onRowDblClick(e) {\r\n\te = e || window.event;\r\n\tvar td = e.target || e.srcElement;\r\n\twhile (td.tagName != 'TR')\r\n\t\ttd = td.parentNode;\r\n\r\n\tfor (var i = 1; i < current[0].length; i++)\r\n\t\ttestOne(td.rowIndex, i);\r\n\tupdateMatches(td.rowIndex);\r\n}\r\n\r\nfunction updateMatches(row) {\r\n\tif (!current[row])\r\n\t\treturn;\r\n\tvar testcases = current[row], max = -Infinity, min = Infinity, maxIndecies = [], minIndecies = [], cells = document.getElementById('testcases').rows[row].cells;\r\n\r\n\tfor (var i = 1; i < testcases.length; i++) {\r\n\t\tif (cells[i].className !== 'error')\r\n\t\t\tcells[i].className = '';\r\n\t\tvar v = testcases[i].result;\r\n\t\tif (typeof v === 'number') {\r\n\t\t\tcells[i].className = 'normal';\r\n\t\t\tif (v > max) {\r\n\t\t\t\tmaxIndecies[0] = i;\r\n\t\t\t\tmaxIndecies.length = 1;\r\n\t\t\t\tmax = v;\r\n\t\t\t} else if (v == max) {\r\n\t\t\t\tmaxIndecies.push(i);\r\n\t\t\t}\r\n\r\n\t\t\tif (v < min) {\r\n\t\t\t\tminIndecies[0] = i;\r\n\t\t\t\tminIndecies.length = 1;\r\n\t\t\t\tmin = v;\r\n\t\t\t} else if (v == min) {\r\n\t\t\t\tminIndecies.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tmaxIndecies.forEach(function (index) {\r\n\t\tcells[index].className = 'worst';\r\n\t});\r\n\r\n\tminIndecies.forEach(function (index) {\r\n\t\tcells[index].className = 'best';\r\n\t});\r\n}\r\n\r\nfunction sum() {\r\n\tfor (var i = 1, row = current.length - 1, cells = document.getElementById('testcases').rows[row].cells, lastRow = current[row]; i < current[0].length; i++) {\r\n\t\tlastRow[i] = 0;\r\n\t\tfor (var j = 1; j < row; j++) {\r\n\t\t\tif (current[j][i] && typeof current[j][i].result === 'number')\r\n\t\t\t\tlastRow[i] += current[j][i].result;\r\n\t\t}\r\n\r\n\t\tcells[i].innerHTML = current[0][i].text + \" - \" + lastRow[i];\r\n\t}\r\n\r\n\tupdateMatches(row);\r\n}\r\n\r\nfunction disableUrl() {\r\n\tdocument.getElementById('openUrl').style.display = 'none';\r\n}"],"names":["initSpeedMatch","frameworks","testcases","options","initIFrame","current","compile","initTable","openTestCase","url","stopSpeedMatch","defaultOptions","rootPath","match","appendScript","document","startSpeedMatch","row","cell","cellMax","length","rowMax","timeout","timer","setInterval","loadingCount","testOne","updateMatches","sum","clearInterval","r","text","Lang","cases","map","lastRow","item","framework","push","cfg","result","NaN","testcase","value","cs","undefined","index","time","frames","getElementById","emptyNode","forEach","loadScript","script","js","shift","iframe","contentWindow","readyState","init","createElement","slice","onload","src","html","appendChild","tr","td","table","innerHTML","htmlEncode","colSpan","className","ondblclick","onRowDblClick","title","onCellDblClick","eclipse","eclipseLength","elem","lastChild","removeChild","type","getElementsByTagName","column","eval","__timer","e","rows","cells","v","count","substr","replace","window","event","target","srcElement","tagName","parentNode","rowIndex","cellIndex","i","max","Infinity","min","maxIndecies","minIndecies","j","disableUrl","style","display","location","search","indexOf","Array","prototype","bind","this","call"],"mappings":"AA6DA,SAAAA,eAAwBC,EAAYC,EAAWC,GAE9CC,WADAC,QAAUC,QAAQL,EAAYC,EAAWC,IAEzCI,UAAUF,SASX,SAAAG,aAAsBC,GACrBC,iBACAC,eAAeC,UAAYH,EAAII,MAAM,eAAiB,KAAK,GAC3DC,aAAaC,SAAUN,GAGxB,SAAAO,gBAAyBC,EAAKC,GAC7B,GAAKb,QAAL,CAGA,IAAIc,EAAUd,QAAQ,GAAGe,OAAQC,EAAShB,QAAQe,OAAS,EAAGE,EAAUjB,QAAQF,QAAQmB,QACxFjB,QAAQkB,MAAQC,YAAY,WAC3B,KAAInB,QAAQoB,cAAgBH,KAAY,GAKxC,GAAIJ,EAAOC,EACVO,QAAQT,EAAKC,GACbA,QACM,CAGN,GAFAS,cAAcV,KACdA,GACWI,EAEV,OADAO,MACOlB,iBAERQ,EAAO,IAEN,KAIJ,SAAAR,iBACML,SAELwB,cAAcxB,QAAQkB,OAGvB,SAAAjB,QAAiBL,EAAYC,EAAWC,GACvC,IAAI2B,KAAQC,KAAMC,KAAKC,SAAWC,KAAUC,IAAaJ,KAAMC,KAAKJ,MAEpEE,EAAE3B,WACFA,EAAUA,GAAW2B,EAAE3B,QACvB,IAAK,IAAIiC,KAAQzB,eAChBmB,EAAE3B,QAAQiC,GAAQA,KAAQjC,EAAUA,EAAQiC,GAAQzB,eAAeyB,GAEpE,IAAK,IAAIC,KAAapC,EACrBiC,EAAIG,GAAaP,EAAE,GAAGV,OACtBU,EAAE,GAAGQ,MAAOP,KAAMM,EAAWE,IAAKtC,EAAWoC,KAC7CF,EAAQG,MAAOP,KAAMM,EAAWG,OAAQC,MAGzC,IAAK,IAAIC,KAAYxC,EAAW,CAE/B,IAAIyC,EAAQzC,EAAUwC,GACrBE,IAAQb,KAAMW,IAEf,GAAc,MAAVC,GAAiBA,IAAUE,UAA/B,CAKA,IAAK,IAAIR,KAAaM,EAAO,CAC5B,IAAIG,EAAQZ,EAAIG,GACZS,EAAQ,IACXF,EAAGE,IACFf,KAAMY,EAAMN,KAKXM,EAAMI,OACTH,EAAG,GAAGG,KAAOJ,EAAMI,MAEpBjB,EAAEQ,KAAKM,QAhBNd,EAAEQ,KAAKM,GAqBT,OADAd,EAAEQ,KAAKH,GACAL,EAKR,SAAA1B,WAAoBC,GAEnB,IAAIJ,EAAaI,EAAQ,GAAI2C,EAASjC,SAASkC,eAAe,UAE9DC,UAAUF,GAEV3C,EAAQoB,aAAe,EAEvBxB,EAAWkD,QAAQ,SAAUR,EAAOG,GAmBnC,SAAAM,IACC,IAAIC,EAASC,EAAGC,SAChBF,EAASvC,aAAa0C,EAAOC,cAAc1C,SAAUsC,MAC5C,GAAO,SAAW,sBAAwB,WACxB,YAAtBA,EAAOK,aAEXrD,EAAQoB,eAEJ6B,EAAGlC,OACNgC,IAIGT,EAAMgB,MACThB,EAAMgB,KAAKH,EAAOC,iBAhCrB,GAAa,GAATX,EAAJ,CAIA,IAAIU,EAASb,EAAMa,OAASzC,SAAS6C,cAAc,UAI/CN,EAAyB,iBAF7BX,EAAQA,EAAMJ,KAEQe,IAAmBX,EAAMW,IAAMX,EAAMW,GAAKX,EAAMW,GAAGO,MAAM,MAE/ExD,EAAQoB,cAAgB,GAAK6B,EAAKA,EAAGlC,OAAS,GAE9CoC,EAAOM,OAAS,WACXR,EAAGlC,QACNgC,IACD/C,EAAQoB,gBAsBT+B,EAAOO,IAAM1D,EAAQF,QAAQS,UAAY+B,EAAMqB,MAAQ3D,EAAQF,QAAQ6D,MACvEhB,EAAOiB,YAAYT,MAOrB,SAAAjD,UAAmBF,GAClB,IAAkD6D,EAAIC,EAAlDC,EAAQrD,SAASkC,eAAe,aAEpCC,UAAUkB,GACVA,EAAQA,EAAMH,YAAYlD,SAAS6C,cAAc,UAEjDvD,EAAQ8C,QAAQ,SAAUR,EAAOG,GAChCoB,EAAKnD,SAAS6C,cAAc,MACxB,IAAMd,GAASzC,EAAQe,SAAW0B,EAAQ,EAC7CH,EAAMQ,QAAQ,SAAUd,EAAWS,IAClCqB,EAAKpD,SAAS6C,cAAc,OACzBS,UAAYC,WAAWjC,EAAUN,MACpCmC,EAAGD,YAAYE,KAEW,IAAjBxB,EAAMvB,SAChB+C,EAAKpD,SAAS6C,cAAc,OACzBW,QAAUlE,EAAQ,GAAGe,OACxB+C,EAAGE,UAAYC,WAAW3B,EAAM,GAAGZ,MACnCoC,EAAGK,UAAY,WACfN,EAAGD,YAAYE,IAEfxB,EAAMQ,QAAQ,SAAUT,EAAUI,GAC7BJ,IACHyB,EAAKpD,SAAS6C,cAAc,MACxB,IAAMd,GACTqB,EAAGE,UAAYC,WAAW5B,EAASX,MACnCoC,EAAGK,UAAY,WACfL,EAAGM,WAAaC,gBAEhBP,EAAGQ,MAAQjC,EAASX,KACpBoC,EAAGM,WAAaG,eAChBT,EAAGE,UAAYC,WAAWO,QAAQnC,EAASX,KAAM1B,EAAQF,QAAQ2E,iBAElEZ,EAAGD,YAAYE,MAIlBC,EAAMH,YAAYC,KAOpB,SAAAhB,UAAmB6B,GAClB,KAAOA,EAAKC,WACXD,EAAKE,YAAYF,EAAKC,WAGxB,SAAAlE,aAAsBC,EAAUN,GAC/B,IAAI4C,EAAStC,EAAS6C,cAAc,UAIpC,OAHAP,EAAO6B,KAAO,kBACd7B,EAAOU,IAAMtD,GACZM,EAASoE,qBAAqB,QAAQ,IAAMpE,GAAUkD,YAAYZ,GAC5DA,EAQR,SAAA3B,QAAiBT,EAAKmE,GACrB,IAAIlE,EAAOb,QAAQY,GACnB,GAAKC,IAELA,EAAOA,EAAKkE,KACe,MAAdlE,EAAKa,KAAlB,CAEA,IAAIgB,EAAO1C,QAAQY,GAAK,GAAG8B,MAAQ1C,QAAQF,QAAQ4C,KAClDS,EAASnD,QAAQ,GAAG+E,GAAQ5B,OAE7B,IACCA,EAAOC,cAAc4B,KAAK,uCAAyCtC,EAAO,sBAAwB7B,EAAKa,KAAO,qCAC9GgB,EAAOS,EAAOC,cAAc6B,QAC3B,MAAOC,GACRxC,EAAOwC,EAER,IAAIpB,EAAKpD,SAASkC,eAAe,aAAauC,KAAKvE,GAAKwE,MAAML,GAC9DjB,EAAGE,UAAY,sBAAwBtB,EAAO,YAAcuB,WAAWO,QAAQ3D,EAAKa,KAAM1B,QAAQF,QAAQ2E,gBACtF,iBAAT/B,EACVoB,EAAGK,UAAY,QAEftD,EAAKsB,OAASO,GAMhB,SAAA8B,QAAiBa,EAAGC,GACnB,OAAOD,EAAEtE,OAASuE,EAAQD,EAAEE,OAAO,EAAGD,GAAS,MAAQD,EAGxD,SAAApB,WAAoB3B,GACnB,OAAOA,GAASA,EAAMkD,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,SAAU,QAAQA,QAAQ,KAAM,UAGlI,SAAAjB,eAAwBW,GAGvB,IADA,IAAIpB,GADJoB,EAAIA,GAAKO,OAAOC,OACLC,QAAUT,EAAEU,WACF,MAAd9B,EAAG+B,SACT/B,EAAKA,EAAGgC,WAETzE,QAAQyC,EAAGgC,WAAWC,SAAUjC,EAAGkC,WACnC1E,cAAcwC,EAAGgC,WAAWC,UAG7B,SAAA1B,cAAuBa,GAGtB,IADA,IAAIpB,GADJoB,EAAIA,GAAKO,OAAOC,OACLC,QAAUT,EAAEU,WACF,MAAd9B,EAAG+B,SACT/B,EAAKA,EAAGgC,WAET,IAAK,IAAIG,EAAI,EAAGA,EAAIjG,QAAQ,GAAGe,OAAQkF,IACtC5E,QAAQyC,EAAGiC,SAAUE,GACtB3E,cAAcwC,EAAGiC,UAGlB,SAAAzE,cAAuBV,GACtB,GAAKZ,QAAQY,GAAb,CAIA,IAAK,IAFDf,EAAYG,QAAQY,GAAMsF,GAAOC,SAAUC,EAAMD,SAAUE,KAAkBC,KAAkBlB,EAAQ1E,SAASkC,eAAe,aAAauC,KAAKvE,GAAKwE,MAEjJa,EAAI,EAAGA,EAAIpG,EAAUkB,OAAQkF,IAAK,CACf,UAAvBb,EAAMa,GAAG9B,YACZiB,EAAMa,GAAG9B,UAAY,IACtB,IAAIkB,EAAIxF,EAAUoG,GAAG9D,OACJ,iBAANkD,IACVD,EAAMa,GAAG9B,UAAY,SACjBkB,EAAIa,GACPG,EAAY,GAAKJ,EACjBI,EAAYtF,OAAS,EACrBmF,EAAMb,GACIA,GAAKa,GACfG,EAAYpE,KAAKgE,GAGdZ,EAAIe,GACPE,EAAY,GAAKL,EACjBK,EAAYvF,OAAS,EACrBqF,EAAMf,GACIA,GAAKe,GACfE,EAAYrE,KAAKgE,IAMpBI,EAAYvD,QAAQ,SAAUL,GAC7B2C,EAAM3C,GAAO0B,UAAY,UAG1BmC,EAAYxD,QAAQ,SAAUL,GAC7B2C,EAAM3C,GAAO0B,UAAY,UAI3B,SAAA5C,MACC,IAAK,IAAI0E,EAAI,EAAGrF,EAAMZ,QAAQe,OAAS,EAAGqE,EAAQ1E,SAASkC,eAAe,aAAauC,KAAKvE,GAAKwE,MAAOtD,EAAU9B,QAAQY,GAAMqF,EAAIjG,QAAQ,GAAGe,OAAQkF,IAAK,CAC3JnE,EAAQmE,GAAK,EACb,IAAK,IAAIM,EAAI,EAAGA,EAAI3F,EAAK2F,IACpBvG,QAAQuG,GAAGN,IAAsC,iBAAzBjG,QAAQuG,GAAGN,GAAG9D,SACzCL,EAAQmE,IAAMjG,QAAQuG,GAAGN,GAAG9D,QAG9BiD,EAAMa,GAAGjC,UAAYhE,QAAQ,GAAGiG,GAAGvE,KAAO,MAAQI,EAAQmE,GAG3D3E,cAAcV,GAGf,SAAA4F,aACC9F,SAASkC,eAAe,WAAW6D,MAAMC,QAAU,OAjXpD,IAAI1G,QAAU,KACb2B,MACCC,MAAO,QACPL,IAAK,SAENjB,gBACCoC,KAAM,IACNnC,SAAU,GACVoD,KAAM,gBACNc,cAAe,IACfxD,QAAS,KAGP0F,SAASC,SACZnB,OAAOhC,OAAS,WAEf,IAAIrD,EAAMuG,SAASC,OAAOrB,OAAO,GAC7BnF,EAAIyG,QAAQ,sBAAwB,EACvCzG,EAAMA,EAAIoF,QAAQ,oBAAqB,IAEvCgB,aAGD9F,SAASkC,eAAe,OAAON,MAAQlC,EAGvCD,aAAaC,KA0Bf0G,MAAMC,UAAUjE,QAAUgE,MAAMC,UAAUjE,SAAW,SAAUR,EAAO0E,GACrE,IAAK,IAAIf,EAAI,EAAGA,EAAIgB,KAAKlG,OAAQkF,IAChC3D,EAAM4E,KAAKF,EAAMC,KAAKhB,GAAIA,EAAGgB"}