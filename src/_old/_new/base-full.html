<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>DOM 操作（完整版）</title>
    <meta name="module-info" content="status=todo, parent-title=DOM, parent-order=utility">
    <meta name="author" content="xuld@vip.qq.com">
    <meta name="description" content="提供统一的、快速的 DOM 操作方法。">

    <!-- 以下是本组件的全部源码 -->
    <!--[if lte IE 8]>
        <script type="text/javascript" src="../../src/shim/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="../../src/dom/base-full.js"></script>
</head>
<body>
    <!-- 以下代码仅用于文档演示 -->
    <script type="text/javascript" src="../../assets/doc.js"></script>
    
    <div id="elem" class="doc-box"></div>
    <script>
        var elem = document.getElementById('elem');
    </script>

    <h2>通用</h2>

    <h5>遍历</h5>
    <pre>Dom.each([elem], function(elem){ console.log(elem) });</pre>

    <h5>Dom Ready</h5>
    <pre>Dom.ready(function(){ alert("DOM ready") });</pre>

    <h5>$ = Dom.get + Dom.find + Dom.parse + Dom Ready</h5>
    <pre>$(".doc-box")</pre>

    <h2>获取节点</h2>

    <h5>解析并生成节点</h5>
    <pre>Dom.parse("<a>你好</a>")</pre>

    <h5>查找所有节点</h5>
    <pre>Dom.query(".doc-box")</pre>

    <h5>查找第一个节点</h5>
    <pre>Dom.find(".doc-box")</pre>

    <h5>判断是否匹配</h5>
    <pre>Dom.matches(elem, "a");</pre>

    <h2>事件</h2>

    <h5>绑定事件</h5>
    <pre>Dom.on(elem, 'click', function(){ alert("点击事件") });</pre>

    <h5>解绑事件</h5>
    <pre>Dom.off(elem, 'click', function(){ alert("点击事件2") });</pre>

    <h5>手动触发事件</h5>
    <pre>Dom.trigger(elem, 'click', function(){ alert("点击事件") });</pre>

    <h2>文档遍历</h2>

    <h5>判断是否包含</h5>
    <pre>Dom.contains(elem, elem);</pre>

    <h5>最近父节点</h5>
    <pre>Dom.closest(elem, "body");</pre>

    <h5>获取文档</h5>
    <pre>Dom.getDocument(elem);</pre>

    <h5>父节点</h5>
    <pre>Dom.getParent(elem);</pre>

    <h5>第一个子节点</h5>
    <pre>Dom.getFirst(elem);</pre>

    <h5>最后一个子节点</h5>
    <pre>Dom.getLast(elem);</pre>

    <h5>下一兄弟节点</h5>
    <pre>Dom.getNext(elem);</pre>

    <h5>上一兄弟节点</h5>
    <pre>Dom.getPrev(elem);</pre>

    <h5>所有子节点</h5>
    <pre>Dom.getChildren(elem);</pre>

    <h2>增删操作</h2>

    <h5>插到末尾</h5>
    <pre>Dom.append(elem, "append");</pre>

    <h5>插到前尾</h5>
    <pre>Dom.prepend(elem, "prepend");</pre>

    <h5>插到后面</h5>
    <pre>Dom.after(elem, "after");</pre>

    <h5>插到前面</h5>
    <pre>Dom.before(elem, "before");</pre>

    <h5>删除节点</h5>
    <pre>Dom.remove(elem);</pre>

    <h5>复制节点</h5>
    <pre>Dom.clone(elem);</pre>

    <h2>属性和样式</h2>

    <h5>判断类</h5>
    <pre>Dom.hasClass(elem, "light");</pre>

    <h5>添加类</h5>
    <pre>Dom.addClass(elem, "light");</pre>

    <h5>删除类</h5>
    <pre>Dom.removeClass(elem, "light");</pre>

    <h5>切换类</h5>
    <pre>Dom.toggleClass(elem, "light");</pre>

    <h5>获取属性</h5>
    <pre>Dom.getAttr(elem, "className");</pre>

    <h5>设置属性</h5>
    <pre>Dom.setAttr(elem, "className", "doc-doc"); // 设置为 null 表示删除。</pre>

    <h5>获取文本</h5>
    <pre>Dom.getText(elem);</pre>

    <h5>设置文本</h5>
    <pre>Dom.setText(elem, "a");</pre>

    <h5>获取内容</h5>
    <pre>Dom.getHtml(elem);</pre>

    <h5>设置内容</h5>
    <pre>Dom.setHtml(elem, "<em>a</em>");</pre>

    <h5>获取样式</h5>
    <pre>Dom.getStyle(elem, "fontSize");</pre>

    <h5>设置样式</h5>
    <pre>Dom.setStyle(elem, "fontSize", "12px");</pre>

    <h5>快速样式计算</h5>
    <pre>Dom.getStyleNumber(elem, "fontSize");</pre>

    <h5>计算样式</h5>
    <pre>Dom.calcStyle(elem, "fontSize");</pre>

    <h2>效果</h2>

    <h5>显示</h5>
    <pre>Dom.show(elem, 'height');</pre>

    <h5>隐藏</h5>
    <pre>Dom.hide(elem, 'height');</pre>

    <h5>切换</h5>
    <pre>Dom.toggle(elem);</pre>

    <h5>判断是否隐藏</h5>
    <pre>Dom.isHidden(elem);</pre>

    <h5>自定义</h5>
    <pre>Dom.animate(elem, {width: 100}, {width: 400});</pre>

    <h2>尺寸和定位</h2>

    <h5>获取大小</h5>
    <pre>Dom.getSize(elem);</pre>

    <h5>设置大小</h5>
    <pre>Dom.setSize(elem, {width:200, height:400});</pre>

    <h5>获取滚动区域大小</h5>
    <pre>Dom.getScrollSize(elem);</pre>

    <h5>获取相对偏移节点</h5>
    <pre>Dom.getOffsetParent(elem);</pre>

    <h5>获取相对位置</h5>
    <pre>Dom.getOffset(elem);</pre>

    <h5>设置相对位置</h5>
    <pre>Dom.setOffset(elem, {left:100, top: 500});</pre>

    <h5>获取绝对位置</h5>
    <pre>Dom.getPosition(elem);</pre>

    <h5>设置绝对位置</h5>
    <pre>Dom.setPosition(elem, {left:100, top: 500});</pre>

    <h5>获取滚动位置</h5>
    <pre>Dom.getScroll(elem);</pre>

    <h5>设置滚动位置</h5>
    <pre>Dom.setScroll(elem, {left:100, top: 500});</pre>

    <h2>关于 dom/base 和 jQuery 的区别</h2>
    
    <p>dom/base 组件更适于组件开发，而 jQuery 更适于业务逻辑。这决定了它们的区别：</p>
    
    <ul>
        <li>dom/base 不提供各种 hack，代码更短更快。但对 js 基础不好的用户使用 dom/base 可能会发现一些问题，而这些问题在 jQuery 不会出现。</li>
        <li>dom/base 体积是 jQuery 的 1/10，我们提供这个组件，让用户可以直接使用 UI 组件而不依赖 jQuery, 特别是在 React 框架下，jQuery 已经不那么必要。</li>
        <li>dom/base 提供的 API 更利于计算。</li>
    </ul>
    
    <blockquote class="doc-warning">dom/base 只提供组件开发所需要的必须函数，并且只考虑最新浏览器的兼容性，它的许多 API 和 jQuery 同名但不同功能，用户可以自己选择使用 dom/base 提供的功能（仅 6k 体积）或者直接使用 jQuery。</blockquote>
</body>
</html>
