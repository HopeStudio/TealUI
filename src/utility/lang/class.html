<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>类</title>
    <meta name="module-info" content="">
    <meta name="author" content="xuld@vip.qq.com">
    <meta name="description" content="为 JavaScript 提供创建类的功能。">

    <!-- 以下是本组件的全部源码 -->
    <script type="text/javascript" src="../../utility/lang/class.js"></script>
</head>
<body>
    <!-- 以下代码仅用于文档演示 -->
    <script type="text/javascript" src="../../../assets/doc.js"></script>
    <h2>基本用法</h2>
    <h3>创建最简单的类</h3>
    <pre>var Animal = Base.extend();</pre>
    <h3>为类添加字段和方法</h3>
    <pre>
        var Animal = Base.extend({
            
            // 我是字段（Field）
            name: '小黑',
        
            // 我是方法（Method）
            say: function () {
                alert(this.name + "调用了 say 方法");
            }
        });
    </pre>
    <pre>
        var ani = new Animal();  // 创建一个类的实例。
        ani.name = '大白';       // 为字段赋值。
        ani.say();               // 调用 Animal 类的 say 方法。
    </pre>
    <h3>为类添加构造函数</h3>
    <pre>
        var Animal = Base.extend({
            constructor: function (args) {
                alert("正在执行 Animal 类的构造函数。");
            }
        });
    </pre>
    <pre>
        var ani = new Animal(); // 创建一个类的实例时会调用类构造函数。
    </pre>
    <p>如果子类未定义构造函数，则继承父类构造函数。</p>
    <h3>继承</h3>
    <pre>
        var Animal = Base.extend({
            say: function () {
                alert("正在执行 Animal 类的 say 方法");
            },
            constructor: function (args) {
                alert("正在执行 Animal 类的构造函数。");
            }
        });
    </pre>
    <pre>
        // 继承 Animal 类创建子类。
        var Dog = Animal.extend({
            say2: function () {
                alert("正在执行 Dog 类的 say 方法");
            }
        });
    </pre>
    <pre>
        var dog = new Dog(); // 创建一个类的实例。
        dog.say(); // 调用 Animal 类的 say 方法。
        dog.say2(); // 调用 Dog 类的 say2 方法。
    </pre>
    <p>如果子类需要调用被覆盖的父类成员，可通过原型调用，如 <code>Animal.progress.say.apply(this, arguments)</code>。</p>

    <h3>事件</h3>
    <p>自定义类默认支持事件模型。</p>
    <pre>
        var Animal = Base.extend();
        var ani = new Animal();
        ani.on('needsay', function (name) {
            alert("needsay事件被触发了， 参数 name=" + name);
        });
        ani.trigger('needsay', "触发needsay事件时的参数");
    </pre>

    <h2>API <small>(源码: <a href="../../utility/lang/class.js" target="_blank">utility/lang/class.js</a>)</small></h2>
    <table class="doc-table">
        <tr>
            <th>API</th>
            <th>描述</th>
            <th>示例</th>
        </tr>
        <tr>
            <td><code>Base.extend</code></td>
            <td>继承当前类创建派生类</td>
            <td><pre>Base.extend({})</pre></td>
        </tr>
        <tr>
            <td><code><em>clazz</em>.toString</code></td>
            <td>返回当前对象的字符串形式</td>
            <td><pre>new (Base.extend())().toString()</pre></td>
        </tr>
        <tr>
            <td><code><em>clazz</em>.on</code></td>
            <td>添加一个事件监听器</td>
            <td><pre>new (Base.extend())().on("evt", function(){})</pre></td>
        </tr>
        <tr>
            <td><code><em>clazz</em>.off</code></td>
            <td>删除一个或多个事件监听器</td>
            <td><pre>new (Base.extend())().off("evt")</pre></td>
        </tr>
        <tr>
            <td><code><em>clazz</em>.trigger</code></td>
            <td>手动触发一个监听器</td>
            <td><pre>new (Base.extend())().trigger("evt")</pre></td>
        </tr>
    </table>
</body>
</html>
