<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>控件基类</title>
    <meta name="module-info" content="parent-parent-title=控件, parent-parent-order=typography, parent-title=核心, parent-order=^, order=^" />
    <meta name="author" content="xuld@vip.qq.com">
    <meta name="description" content="控件即 UI 组件，本组件定义了所有 UI 组件的生命周期和统一使用方式。">

    <!-- 以下是本组件的全部源码 -->
    <link rel="stylesheet" type="text/css" href="../../typography/core/base.css" />

    <script type="text/javascript" src="../../utility/lang/html5.js"></script>
    <script type="text/javascript" src="../../utility/dom/base.js"></script>
    <script type="text/javascript" src="../../utility/lang/class.js"></script>
    <script type="text/javascript" src="../../control/core/base.js"></script>
</head>
<body>
    <!-- 以下代码仅用于文档演示 -->
    <script type="text/javascript" src="../../../assets/doc.js"></script>

    <h2>统一组件用法</h2>
    <p>假设有一个 <code>MyButton</code> 组件，那可以使用如下代码使用它：</p>
    <script type="text/html" class="doc-demo">
        <div data-role="myButton">组件内容</div>
    </script>

    <p>系统会在 DOM ready 时遍历所有 <code>[data-role]</code>并初始化为相应组件。对于动态生成的组件，则必须使用 JavaScript 手动创建：</p>
    <script type="text/html" class="doc-demo">
        <div data-role="myButton" id="myButton1">组件内容</div>
        &lt;script>
            $('#myButton1').role();
        &lt;/script>
    </script>

    <p>也可完全通过 JavaScript 控制逻辑，此方法可使一个节点拥有多个组件角色：</p>
    <script type="text/html" class="doc-demo">
        <div id="myButton1">组件内容</div>
        &lt;script>
            $('#myButton1').role("myButton");
        &lt;/script>
    </script>

    <p><code>role</code> 函数将返回创建的组件对象，可以通过此对象继续对组件实例操作。</p>

    <h2>配置组件</h2>
    <p>假设<code>MyButton</code> 组件有一个 <code>buttonSize</code> 配置项和 <code>customevent</code> 自定义事件，那可在 HTML 中配置：</p>
    <script type="text/html" class="doc-demo">
        <div data-role="myButton" data-button-size="3" data-oncustomevent="alert(0)">组件内容</div>
    </script>

    <p>在 JavaScript 中，传递第二个参数：</p>
    <script type="text/html" class="doc-demo">
        <div id="myButton1">组件内容</div>
        &lt;script>
            $('#myButton1').role("myButton", {
                buttonSize: 3,
                oncustomevent: function () {
                    alert(0)
                }
            });
        &lt;/script>
    </script>

    <h2>开发新组件</h2>
    <p>所有组件都继承自 <code>Control</code> 类，子类可重写 <code>init</code> 函数来实现组件的初始化逻辑。</p>
    <script type="text/javascript" class="doc-demo">
        var MyButton = Control.extend({

            buttonSize: 3,  //   定义配置项及默认值。

            init: function(){
                this.elem.style.width = this.buttonSize + 'px'; // this.elem 是当前绑定的元素。
                this.trigger('customevent'); // 触发自定义事件。
            }

        });
    </script>

</body>
</html>
