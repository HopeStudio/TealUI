{"version":3,"file":"doc.js","sources":["doc.js"],"sourcesContent":["/**\r\n * 提供文档演示相关功能接口。\r\n */\r\nconst Doc = {\r\n\r\n    /**\r\n     * 初始化文档页面。\r\n     * @param meta 当前页面的元数据。\r\n     */\r\n    init(meta) {\r\n        Doc._meta = meta;\r\n        if (Doc._hasQuery(\"doc-fullscreen\")) {\r\n            Doc._toggleClass(document.body, \"doc-fullscreen\");\r\n            Doc._each(\"#doc_header,#doc_sidebar,#doc_pager,#doc_footer,.doc-permalink\", Doc._remove);\r\n            Doc._get(\"doc_mainmenu\").innerHTML = `<a href=\"javascript:Doc.toggleFullScreen()\" title=\"退出全屏\"><i class=\"doc-icon\">✠</i>退出全屏</a>`;\r\n        } else {\r\n            if (meta.test && Doc._hasQuery(\"doc-unittest\")) {\r\n                document.title = \"单元测试：\" + document.title.replace(/\\s*-[^\\-]*$/, \"\");\r\n                const main = Doc._get(\"doc_main\");\r\n                main.innerHTML = `<aside id=\"doc_mainmenu\" class=\"doc-menubutton\" style=\"margin: -.25rem 1rem 0\">\r\n                            <a href=\"javascript:Doc.toggleUnitTest()\"><i class=\"doc-icon\">✖</i>退出单元测试</a>\r\n                        </aside>\r\n                        <link rel=\"stylesheet\" href=\"${meta.root}/assets/doc/qunit.css\">\r\n                        <div id=\"qunit\"><span class=\"doc-tip\"><i class=\"doc-icon doc-spin\">҉</i> 正在载入测试用例...</span></div>\r\n                        <div id=\"qunit-fixture\"></div>\r\n                        <div style=\"display: none\" class=\"doc\">${main.innerHTML}</div>`;\r\n                const pager = Doc._get(\"doc_pager\");\r\n                if (pager) {\r\n                    main.appendChild(pager);\r\n                }\r\n                Doc.runUnitTest(meta.test);\r\n            }\r\n\r\n            Doc._insert(`<div id=\"doc_progress\"></div>`);\r\n            Doc._insert(`<a href=\"javascript:Doc.gotoTop()\" id=\"doc_gototop\" class=\"doc-icon doc-gototop-hide\">↑</a>`);\r\n            window.addEventListener(\"resize\", Doc.relayout, false);\r\n            window.addEventListener(\"scroll\", Doc.relayout, false);\r\n            window.addEventListener(\"load\", Doc.relayout, false);\r\n        }\r\n\r\n        Doc._each(\".doc-menubutton>menu\", elem => {\r\n            elem.onclick = () => {\r\n                if (!Doc._hasClass(elem, \"doc-menubutton-disable\")) {\r\n                    Doc._toggleClass(elem, \"doc-menubutton-disable\");\r\n                }\r\n            };\r\n            elem.parentNode.onmouseover = elem.parentNode.ontouchstart = () => {\r\n                if (Doc._hasClass(elem, \"doc-menubutton-disable\")) {\r\n                    Doc._toggleClass(elem, \"doc-menubutton-disable\");\r\n                }\r\n            };\r\n        });\r\n        Doc._each(\"a[href^='#']\", anchor => {\r\n            anchor.onclick = e => {\r\n                const target = Doc._get(anchor.getAttribute(\"href\").slice(1));\r\n                if (target) {\r\n                    Doc._scrollTo(document, target.getBoundingClientRect().top - 5, true);\r\n                    if (target.parentNode && target.parentNode.parentNode && target.parentNode.parentNode.className === \"doc-api\") {\r\n                        Doc.toggleApi(target.querySelector(\"td > .doc-api-toggle\"), true);\r\n                    }\r\n                    history.pushState(null, document.title, anchor.href);\r\n                    e.preventDefault();\r\n                }\r\n            };\r\n        });\r\n        Doc._each(\"#doc_pager a\", anchor => {\r\n            anchor.href += location.search;\r\n        });\r\n        const target = location.hash.length > 1 && Doc._get(location.hash.slice(1));\r\n        if (target && target.parentNode && target.parentNode.parentNode && target.parentNode.parentNode.className === \"doc-api\") {\r\n            Doc.toggleApi(target.querySelector(\"td > .doc-api-toggle\"), true);\r\n        }\r\n        Doc.injectRequire();\r\n    },\r\n\r\n    /**\r\n     * 更新页面布局。\r\n     */\r\n    relayout() {\r\n        const bodyHeight = window.innerHeight;\r\n        const mainTop = Doc._get(\"doc_main\").getBoundingClientRect().top;\r\n        const mainBottom = Doc._get(\"doc_footer\").getBoundingClientRect().top;\r\n        const smallScreen = Doc._get(\"doc_togglesidebar\").offsetHeight;\r\n        let position;\r\n        let top;\r\n        let innerHeight;\r\n        if (smallScreen || mainTop <= 0) {\r\n            position = \"fixed\";\r\n            top = 0;\r\n            innerHeight = smallScreen ? bodyHeight : Math.min(bodyHeight, mainBottom);\r\n        } else {\r\n            position = \"absolute\";\r\n            top = \"\";\r\n            innerHeight = bodyHeight - mainTop - Math.max(0, bodyHeight - mainBottom);\r\n        }\r\n        const sidebarStyle = Doc._get(\"doc_sidebar\").style;\r\n        sidebarStyle.position = position;\r\n        sidebarStyle.top = top;\r\n        Doc._get(\"doc_sidebar_menu\").style.height = innerHeight - Doc._get(\"doc_sidebar_header\").offsetHeight - 1 + \"px\";\r\n        Doc._get(\"doc_progress\").style.width = mainTop < 0 ? Math.max(0, Math.min(-mainTop * 100 / (mainBottom - 40 - mainTop - bodyHeight), 100)) + \"%\" : 0;\r\n        Doc._get(\"doc_gototop\").className = \"doc-icon\" + (mainTop <= 0 ? \"\" : \" doc-gototop-hide\");\r\n    },\r\n\r\n    /**\r\n     * 初始化列表。\r\n     * @param list 列表数据。\r\n     */\r\n    initList(list) {\r\n        Doc._list = list;\r\n        Doc.renderList();\r\n        Doc.relayout();\r\n\r\n        const menu = Doc._get(\"doc_sidebar_menu\");\r\n        const active = menu.querySelector(\".doc-sidebar-active\");\r\n        if (active) {\r\n            Doc._scrollIntoView(menu, active, true);\r\n        }\r\n\r\n        const filter = Doc._get(\"doc_sidebar_filter\");\r\n        filter.oninput = Doc.renderList;\r\n        filter.onkeydown = e => {\r\n            switch (e.keyCode) {\r\n                case 10 /* enter */:\r\n                case 13 /* enter */:\r\n                    Doc.gotoActiveItem();\r\n                    break;\r\n                case 38 /* up */:\r\n                case 40 /* down */:\r\n                    e.preventDefault();\r\n                    Doc.moveActiveItem(e.keyCode === 38 ? -1 : 1);\r\n                    break;\r\n            }\r\n        };\r\n\r\n        if (navigator.appVersion.indexOf(\"Win\") >= 0) {\r\n            menu.className = \"doc-hidescrollbar\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 重新渲染列表。\r\n     */\r\n    renderList() {\r\n        let list = Doc._list;\r\n        let active = Doc._meta.active;\r\n\r\n        const filter = Doc._get(\"doc_sidebar_filter\").value.trim().toLowerCase();\r\n        if (filter) {\r\n            list = [];\r\n            const add = item => {\r\n                if (Array.isArray(item)) {\r\n                    for (const data of item) {\r\n                        const matchResult = Doc._matchFilter(data, filter);\r\n                        if (matchResult) {\r\n                            matchResult.href = data.href;\r\n                            matchResult.title = data.title;\r\n                            list.push(matchResult);\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (const key in item) {\r\n                        add(item[key]);\r\n                    }\r\n                }\r\n            };\r\n            add(Doc._list);\r\n            list.sort((x, y) => y.level - x.level);\r\n            active = list[0] && list[0].href;\r\n        }\r\n\r\n        let html = \"\";\r\n        const append = items => {\r\n            if (Array.isArray(items)) {\r\n                for (const item of items) {\r\n                    const title = Doc._encodeHTML(item.title);\r\n                    html += `<li${item.href === active ? ` class=\"doc-sidebar-active\" aria-selected=\"true\"` : \"\"}><a href=\"${Doc._meta.root}/${Doc._meta.dir}/${item.href}${location.search}\" title=\"${title}\">${item.titleHtml || title}<small>${item.nameHtml || Doc._encodeHTML(Doc.nameOfItem(item.href))}</small></a></li>`;\r\n                }\r\n            } else {\r\n                for (const key in items) {\r\n                    html += `<li><span onclick=\"Doc.toggleMenu(this)\">${Doc._encodeHTML(key)}</span><ul>`;\r\n                    append(items[key]);\r\n                    html += `</ul></li>`;\r\n                }\r\n            }\r\n        };\r\n        append(list);\r\n        Doc._get(\"doc_sidebar_menu\").innerHTML = filter ? html || `<li class=\"doc-tip\"><i class=\\\"doc-icon\\\">❗</i> 无匹配的结果</li>` : html;\r\n    },\r\n\r\n    /**\r\n     * 切换菜单的折叠。\r\n     * @param elem 菜单标题元素。\r\n     */\r\n    toggleMenu(elem) {\r\n        const ul = elem.nextSibling;\r\n        Doc._toggle(ul, ul.style.display);\r\n    },\r\n\r\n    /**\r\n     * 获取指定项的名称。\r\n     * @param href 完整链接地址。\r\n     * @return 返回名称。\r\n     */\r\n    nameOfItem(href) {\r\n        href = href.replace(/(\\/|\\.html)$/, \"\").replace(/^.*\\//, \"\");\r\n        return href.charAt(0).toUpperCase() + href.slice(1);\r\n    },\r\n\r\n    /**\r\n     * 进入列表选中项。\r\n     */\r\n    gotoActiveItem() {\r\n        const active = document.querySelector(\".doc-sidebar-active a\");\r\n        if (active) {\r\n            location.href = active.href;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 移动列表选中项。\r\n     * @param delta 移动的项数。\r\n     */\r\n    moveActiveItem(delta) {\r\n        const menu = Doc._get(\"doc_sidebar_menu\");\r\n        const list = menu.getElementsByTagName(\"a\");\r\n        if (list[0]) {\r\n            let pos = delta < 0 ? -1 : 0;\r\n            for (let i = 0; list[i]; i++) {\r\n                if (list[i].parentNode.className === \"doc-sidebar-active\") {\r\n                    list[i].parentNode.className = \"\";\r\n                    list[i].parentNode.removeAttribute(\"aria-selected\");\r\n                    pos = i + delta;\r\n                    break;\r\n                }\r\n            }\r\n            if (pos < 0) {\r\n                pos += list.length;\r\n            }\r\n            const next = (list[pos] || list[0]).parentNode;\r\n            next.className = \"doc-sidebar-active\";\r\n            next.setAttribute(\"aria-selected\", \"true\");\r\n            Doc._scrollIntoView(menu, next);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 切换侧边栏。\r\n     */\r\n    toggleSidebar() {\r\n        Doc._toggleClass(document.body, \"doc-sidebar-open\");\r\n        if (Doc._hasClass(document.body, \"doc-sidebar-open\")) {\r\n            Doc.relayout();\r\n            const closeSidebar = e => {\r\n                if (!Doc._contains(Doc._get(\"doc_sidebar\"), e.target)) {\r\n                    e.preventDefault();\r\n                    document.removeEventListener(\"touchend\", closeSidebar, false);\r\n                    document.removeEventListener(\"mouseup\", closeSidebar, false);\r\n                    Doc.toggleSidebar();\r\n                }\r\n            };\r\n            document.addEventListener(\"touchend\", closeSidebar, false);\r\n            document.addEventListener(\"mouseup\", closeSidebar, false);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 切换单元测试模式。\r\n     */\r\n    toggleUnitTest() {\r\n        Doc._toggleQuery(\"doc-unittest\");\r\n    },\r\n\r\n    /**\r\n     * 切换全屏模式。\r\n     */\r\n    toggleFullScreen() {\r\n        Doc._toggleQuery(\"doc-fullscreen\");\r\n    },\r\n\r\n    /**\r\n     * 切换所有代码折叠。\r\n     */\r\n    toggleDemoCodes() {\r\n        let hasCollapsed = !!document.querySelector(\".doc-demo-collapsed\");\r\n        Doc._each(\".doc-demo\", elem => {\r\n            if (Doc._hasClass(elem, \"doc-demo-collapsed\") === hasCollapsed) {\r\n                Doc.toggleDemoCode(elem);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 折叠或展开源码。\r\n     */\r\n    toggleDemoCode(elem) {\r\n        const value = Doc._hasClass(elem, \"doc-demo-collapsed\");\r\n        Doc._toggleClass(elem, \"doc-demo-collapsing\");\r\n        Doc._toggle(elem.querySelector(\".doc-code\"), value, () => {\r\n            Doc._toggleClass(elem, \"doc-demo-collapsing\");\r\n            Doc._toggleClass(elem, \"doc-demo-collapsed\");\r\n        });\r\n        const toggle = elem.querySelector(\".doc-demo-toggle\");\r\n        if (toggle) {\r\n            toggle.setAttribute(\"aria-label\", value ? \"折叠源码\" : \"查看源码\");\r\n            toggle.setAttribute(\"aria-checked\", value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 折叠或展开所有 API 详情。\r\n     */\r\n    toggleApis() {\r\n        const open = !document.querySelector(\".doc-api-open\");\r\n        Doc._each(\".doc-api-toggle\", elem => {\r\n            Doc.toggleApi(elem, open);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 折叠或展开 API 详情。\r\n     * @param elem 箭头元素。\r\n     * @param value 如果为 true 则强制打开，如果为 false 为强制关闭。\r\n     */\r\n    toggleApi(elem, value) {\r\n        const td = elem.parentNode;\r\n        const tr = td.parentNode;\r\n        const table = tr.parentNode.parentNode;\r\n        if (!table.style.tableLayout) {\r\n            for (const th of table.querySelectorAll(\".doc-api>tbody>tr>th\")) {\r\n                th.style.width = th.offsetWidth * 100 / table.offsetWidth + \"%\";\r\n            }\r\n            table.style.tableLayout = \"fixed\";\r\n        }\r\n        const hide = Doc._hasClass(tr, \"doc-api-open\");\r\n        if (value === undefined || value !== hide) {\r\n            if (hide) {\r\n                Doc._toggleClass(tr, \"doc-api-hiding\");\r\n            }\r\n            Doc._toggle(td.querySelector(\".doc-api-detail\"), !hide, () => {\r\n                if (hide) {\r\n                    Doc._toggleClass(tr, \"doc-api-hiding\");\r\n                }\r\n                td.colSpan = hide ? 0 : 5;\r\n                Doc._toggleClass(tr, \"doc-api-open\");\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 复制指定的内容。\r\n     * @param content 要复制的文本内容。\r\n     */\r\n    copy(content) {\r\n        if (/ipad|ipod|iphone|android|silk/i.test(navigator.userAgent)) {\r\n            prompt(\"请长按复制\", content);\r\n            return false;\r\n        }\r\n        const textarea = Doc._insert(`<textarea style=\"position:fixed;top:0;left:0;\"></textarea>`);\r\n        textarea.value = content;\r\n        textarea.select();\r\n        try {\r\n            return document.execCommand(\"copy\");\r\n        } catch (e) {\r\n        } finally {\r\n            Doc._remove(textarea);\r\n        }\r\n        prompt(\"请按 Ctrl/Command+C 复制\", content);\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * 复制代码。\r\n     * @param elem 要复制的代码元素。\r\n     */\r\n    copyCode(elem) {\r\n        elem.innerHTML = Doc.copy(elem.nextSibling.textContent) ? \"✓\" : \"✖\";\r\n        elem.onmouseout = elem.onmouseout || (() => {\r\n            elem.innerHTML = \"❐\";\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 返回顶部。\r\n     */\r\n    gotoTop() {\r\n        Doc._scrollTo(document, 0);\r\n    },\r\n\r\n    /**\r\n     * 执行单元测试。\r\n     * @param test 测试文件路径。\r\n     */\r\n    runUnitTest(test) {\r\n        require.alias[\"assert\"] = \"assert\";\r\n        require(`${Doc._meta.root}/assets/doc/qunit.js`, QUnit => {\r\n            QUnit.config.autostart = true;\r\n            window.QUnit = QUnit;\r\n            define(\"assert\", [], () => QUnit.assert);\r\n            const registerQUnitTests = exports => {\r\n                for (const name in exports) {\r\n                    const value = exports[name];\r\n                    if (typeof value === \"function\") {\r\n                        switch (name) {\r\n                            case \"before\":\r\n                                QUnit.moduleStart(value);\r\n                                continue;\r\n                            case \"after\":\r\n                                QUnit.moduleDone(value);\r\n                                continue;\r\n                            case \"beforeEach\":\r\n                                QUnit.testStart(value);\r\n                                continue;\r\n                            case \"afterEach\":\r\n                                QUnit.testDone(value);\r\n                                continue;\r\n                        }\r\n                        if (value.length) {\r\n                            QUnit.test(name, function (assert) {\r\n                                return this(assert.async());\r\n                            }.bind(value));\r\n                        } else {\r\n                            QUnit.test(name, value);\r\n                        }\r\n                    } else {\r\n                        QUnit.module(name);\r\n                        registerQUnitTests(value);\r\n                    }\r\n                }\r\n            };\r\n            require(test, registerQUnitTests);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 注入 `require()`，将模块导出到全局。\r\n     */\r\n    injectRequire() {\r\n        const exportModule = module => {\r\n            for (const name in module.exports) {\r\n                const exportName = name === \"default\" && module.exports[name] && module.exports[name].name || name;\r\n                if (!(exportName in window)) {\r\n                    window[exportName] = module.exports[name];\r\n                }\r\n            }\r\n        };\r\n        for (const name in require.modules) {\r\n            const module = require.modules[name];\r\n            if (module.callbacks) {\r\n                module.callbacks.unshift(() => {\r\n                    exportModule(module);\r\n                });\r\n            } else {\r\n                exportModule(module);\r\n            }\r\n        }\r\n        const oldLoad = require._load;\r\n        require._load = function (module, url) {\r\n            module.callbacks.unshift(() => {\r\n                exportModule(module);\r\n            });\r\n            oldLoad(module, url);\r\n        };\r\n    },\r\n\r\n    /**\r\n     * 生成列表。\r\n     */\r\n    writeList() {\r\n        const main = Doc._get(\"doc_main\");\r\n        const columnCount = Math.floor(main.offsetWidth / 200) || 1;\r\n        let globalTotal = 0;\r\n        const addGroup = (data, title) => {\r\n            const sections = [];\r\n            for (let i = 0; i < columnCount; i++) {\r\n                sections.push({\r\n                    total: 0,\r\n                    html: \"\"\r\n                });\r\n            }\r\n\r\n            for (const key in data) {\r\n                const items = data[key];\r\n\r\n                let minSection = sections[0];\r\n                for (let i = 1; i < columnCount; i++) {\r\n                    if (sections[i].total < minSection.total) {\r\n                        minSection = sections[i];\r\n                    }\r\n                }\r\n\r\n                minSection.total += items.length || 0;\r\n                minSection.html += `<h4 id=\"${Doc._encodeHTML(key)}\">${Doc._encodeHTML(key)}<small>(${items.length || \"0\"})</small></h4><ul>`;\r\n                if (Array.isArray(items)) {\r\n                    for (const item of items) {\r\n                        const title = Doc._encodeHTML(item.title);\r\n                        minSection.html += `<li><a href=\"${Doc._meta.root}/${Doc._meta.dir}/${item.href}\" title=\"${title}\">${title}</a><small>${Doc._encodeHTML(Doc.nameOfItem(item.href))}</small></li>`;\r\n                    }\r\n                }\r\n                minSection.html += `</ul>`;\r\n            }\r\n\r\n            let total = 0;\r\n            let html = \"\";\r\n            for (const section of sections) {\r\n                total += section.total;\r\n                html += `<section class=\"doc-col doc\">${section.html}</section>`;\r\n            }\r\n\r\n            if (title) {\r\n                Doc._insert(`<h2 id=\"${Doc._encodeHTML(title)}\"><a href=\"#${Doc._encodeHTML(title)}\" title=\"链接\" aria-hidden=\"true\" class=\"doc-icon doc-permalink\">☍</a>${Doc._encodeHTML(title)}<small>(${total})</small></h2>`, main);\r\n            }\r\n            Doc._insert(`<div class=\"doc-waterfall doc-row\">${html}</div>`, main);\r\n            globalTotal += total;\r\n        };\r\n\r\n        const data = Doc._list;\r\n        let hasLevel3 = false;\r\n        for (const key in data) {\r\n            hasLevel3 = !Array.isArray(data[key]);\r\n            break;\r\n        }\r\n        if (hasLevel3) {\r\n            for (const key in data) {\r\n                addGroup(data[key], key);\r\n            }\r\n        } else {\r\n            addGroup(data);\r\n        }\r\n\r\n        const h1 = document.querySelector(\"#doc_main>h1\");\r\n        if (h1) {\r\n            Doc._insert(`<small>(${globalTotal})</small>`, h1);\r\n        }\r\n\r\n        const loading = Doc._get(\"doc_loading\");\r\n        if (loading) {\r\n            Doc._remove(loading);\r\n        }\r\n\r\n        document.onkeydown = e => {\r\n            if (e.keyCode === 70 /* f */ && (e.ctrlKey || e.metaKey) && document.activeElement !== Doc._get(\"doc_sidebar_filter\")) {\r\n                Doc._get(\"doc_sidebar_filter\").focus();\r\n                Doc._get(\"doc_sidebar_filter\").select();\r\n                e.preventDefault();\r\n            }\r\n        };\r\n    },\r\n\r\n    _get(id) {\r\n        return document.getElementById(id);\r\n    },\r\n\r\n    _insert(html, parent = document.body, prepend) {\r\n        const div = Doc._div || (Doc._div = document.createElement(\"div\"));\r\n        div.innerHTML = html;\r\n        html = div.firstChild;\r\n        return prepend ? parent.insertBefore(html, parent.firstChild) : parent.appendChild(html);\r\n    },\r\n\r\n    _remove(elem) {\r\n        elem.parentNode.removeChild(elem);\r\n    },\r\n\r\n    _each(selector, callback) {\r\n        for (const elem of document.querySelectorAll(selector)) {\r\n            callback(elem);\r\n        }\r\n    },\r\n\r\n    _hasClass(elem, className) {\r\n        return (\" \" + elem.className).indexOf(\" \" + className) >= 0;\r\n    },\r\n\r\n    _toggleClass(elem, className) {\r\n        className = \" \" + className;\r\n        const current = \" \" + elem.className;\r\n        elem.className = (current.indexOf(className) < 0 ? current + className : current.replace(className, \"\")).trim();\r\n    },\r\n\r\n    _contains(parent, child) {\r\n        if (parent.contains) {\r\n            return parent.contains(child);\r\n        }\r\n        while (child) {\r\n            if (child === parent) {\r\n                return true;\r\n            }\r\n            child = child.parentNode;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    _scrollTo(elem, value, delta) {\r\n        if (elem === document) {\r\n            const html = elem.documentElement;\r\n            const body = elem.body;\r\n            if (html.scrollTop) {\r\n                elem = html;\r\n            } else if (body.scrollTop) {\r\n                elem = body;\r\n            } else {\r\n                html.scrollTop = 1;\r\n                elem = html.scrollTop ? html : body;\r\n                html.scrollTop = 0;\r\n            }\r\n        }\r\n        if (delta) {\r\n            value += elem.scrollTop;\r\n        }\r\n\r\n        const start = elem.scrollTop;\r\n        const length = value - start;\r\n        let count = 0;\r\n        let last = start;\r\n        const step = () => {\r\n            if (elem.scrollTop === last) {\r\n                elem.scrollTop = start + (1 - (1 - count / 25) ** 3) * length;\r\n                if (count++ < 25) {\r\n                    last = elem.scrollTop;\r\n                    setTimeout(step, 20);\r\n                }\r\n            }\r\n        };\r\n        step();\r\n    },\r\n\r\n    _scrollIntoView(scrollParent, elem, alignCenter) {\r\n        const deltaY = elem.getBoundingClientRect().top - scrollParent.getBoundingClientRect().top;\r\n        const deltaHeight = scrollParent.offsetHeight - elem.offsetHeight;\r\n        if (deltaY < 0 || deltaY > deltaHeight) {\r\n            const offsetY = alignCenter ? deltaHeight / 2 : 0;\r\n            scrollParent.scrollTop += deltaY - (deltaY < 0 ? offsetY : deltaHeight - offsetY);\r\n        }\r\n    },\r\n\r\n    _toggle(elem, value, callback) {\r\n        if (value) {\r\n            elem.style.display = \"\";\r\n            callback && callback();\r\n        }\r\n        let oldHeight = elem.offsetHeight;\r\n        let newHeight = 0;\r\n        if (value) {\r\n            newHeight = oldHeight;\r\n            oldHeight = 0;\r\n        }\r\n        elem.style.overflow = \"hidden\";\r\n        elem.style.height = oldHeight + \"px\";\r\n        elem.clientLeft;\r\n        elem.style.webkitTransition = elem.style.transition = \"height .3s\";\r\n        elem.style.height = newHeight + \"px\";\r\n        setTimeout(() => {\r\n            elem.style.webkitTransition = elem.style.transition = elem.style.height = elem.style.overflow = \"\";\r\n            if (!value) {\r\n                elem.style.display = \"none\";\r\n                callback && callback();\r\n            }\r\n        }, 300);\r\n    },\r\n\r\n    _hasQuery(name) {\r\n        return new RegExp(\"([?&])\" + name + \"\\\\b\").test(location.search);\r\n    },\r\n\r\n    _toggleQuery(name) {\r\n        const regexp = new RegExp(\"([?&])\" + name + \"\\\\b\");\r\n        if (regexp.test(location.search)) {\r\n            location.search = location.search.replace(regexp, \"$1\");\r\n        } else {\r\n            location.search += (location.search.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + name;\r\n        }\r\n    },\r\n\r\n    _matchFilter(data, filter) {\r\n        if (!data._title) {\r\n            data._title = Doc._splitCharCodes(data.title);\r\n            data._pinyin = data.pinyin.split(\" \");\r\n            data._name = data.href.replace(/\\/$/, \"\");\r\n            data._words = Doc._splitWord(data._name);\r\n            if (data.keywords) {\r\n                data._keywords = Doc._splitCharCodes(data.keywords);\r\n                data._keywordsPinYin = data.keywordsPinYin.split(\" \");\r\n            }\r\n        }\r\n        const titleResult = Doc._matchPinYin(data._title, data._pinyin, filter);\r\n        const wordResult = Doc._matchWord(data._words, filter);\r\n        const keywordsResult = data._keywords ? Doc._matchPinYin(data._keywords, data._keywordsPinYin, filter) : [];\r\n        if (titleResult.length || wordResult.length || keywordsResult.length) {\r\n            let level = 0;\r\n            if (titleResult.length) {\r\n                if (titleResult[0].start === 0) {\r\n                    level += 100000;\r\n                }\r\n                level += (titleResult[0].end - titleResult[0].start) * titleResult.length;\r\n            }\r\n            if (wordResult.length) {\r\n                if (wordResult[0].start === 0) {\r\n                    level += 10000;\r\n                }\r\n                level += (wordResult[0].end - wordResult[0].start) * wordResult.length;\r\n            }\r\n            if (keywordsResult.length && keywordsResult[0].start === 0) {\r\n                level++;\r\n            }\r\n            level -= data._title.length;\r\n            return {\r\n                level: level,\r\n                titleHtml: Doc._insertMark(data.title, titleResult),\r\n                nameHtml: Doc._insertMark(data._name, wordResult)\r\n            }\r\n        }\r\n    },\r\n\r\n    _splitCharCodes(chars) {\r\n        const result = [];\r\n        for (let i = 0; i < chars.length; i++) {\r\n            result.push(chars.charCodeAt(i));\r\n        }\r\n        return result;\r\n    },\r\n\r\n    _splitWord(word) {\r\n        const result = [];\r\n        word.replace(/[A-Z][a-z]*|[a-z]+|./g, all => {\r\n            result.push(all.toLowerCase());\r\n        });\r\n        return result;\r\n    },\r\n\r\n    _matchPinYin(charCodes, pinyins, filter) {\r\n        const result = [];\r\n        next: for (let i = 0; i < charCodes.length; i++) {\r\n            let charIndex = i;\r\n            let filterIndex = 0;\r\n            while (filterIndex < filter.length) {\r\n                if (charIndex >= charCodes.length) {\r\n                    continue next;\r\n                }\r\n                if (charCodes[charIndex] === filter.charCodeAt(filterIndex)) {\r\n                    filterIndex++;\r\n                } else {\r\n                    let pinyin = pinyins[charIndex];\r\n                    while (pinyin) {\r\n                        const matchCount = Doc._searchStart(pinyin, filter, filterIndex);\r\n                        if (matchCount) {\r\n                            filterIndex += matchCount;\r\n                            break;\r\n                        }\r\n\r\n                        if (pinyin.indexOf(\"|\") >= 0) {\r\n                            pinyin = pinyin.slice(pinyin.indexOf(\"|\") + 1);\r\n                        } else {\r\n                            continue next;\r\n                        }\r\n                    }\r\n                }\r\n                charIndex++;\r\n            }\r\n            result.push({ start: i, end: charIndex });\r\n            i = charIndex;\r\n        }\r\n        return result;\r\n    },\r\n\r\n    _matchWord(words, filter) {\r\n        const result = [];\r\n        let wordIndex = 0;\r\n        let filterIndex = 0;\r\n        for (const word of words) {\r\n            wordIndex += word.length;\r\n            const matchCount = this._searchStart(word, filter, filterIndex);\r\n            if (matchCount) {\r\n                filterIndex += matchCount;\r\n                const start = wordIndex - word.length;\r\n                result.push({ start: start, end: start + matchCount });\r\n            }\r\n        }\r\n        if (filterIndex < filter.length) {\r\n            result.length = 0;\r\n        }\r\n        return result;\r\n    },\r\n\r\n    _searchStart(value, child, childIndex) {\r\n        let result = 0;\r\n        while (result < value.length && childIndex + result < child.length && value.charCodeAt(result) === child.charCodeAt(childIndex + result)) {\r\n            result++;\r\n        }\r\n        return result;\r\n    },\r\n\r\n    _insertMark(value, points) {\r\n        for (let i = points.length; i-- > 0;) {\r\n            const point = points[i];\r\n            value = Doc._encodeHTML(value.slice(0, point.start)) + \"<mark>\" + Doc._encodeHTML(value.slice(point.start, point.end)) + \"</mark>\" + (i === points.length - 1 ? Doc._encodeHTML(value.slice(point.end)) : value.slice(point.end));\r\n        }\r\n        return value;\r\n    },\r\n\r\n    _encodeHTML(value) {\r\n        return value.replace(/[&><\"]/g, m => ({\r\n            \"&\": \"&amp;\",\r\n            \">\": \"&gt;\",\r\n            \"<\": \"&lt;\",\r\n            \"\\\"\": \"&quot;\"\r\n        }[m]));\r\n    }\r\n\r\n};\r\n"],"names":["Doc","init","meta","_meta","_hasQuery","_toggleClass","document","body","_each","_remove","_get","innerHTML","test","title","replace","main","root","pager","appendChild","runUnitTest","_insert","window","addEventListener","relayout","elem","onclick","_hasClass","parentNode","onmouseover","ontouchstart","anchor","e","target","getAttribute","slice","_scrollTo","getBoundingClientRect","top","className","toggleApi","querySelector","history","pushState","href","preventDefault","location","search","hash","length","injectRequire","position","innerHeight","bodyHeight","mainTop","mainBottom","smallScreen","offsetHeight","Math","min","max","sidebarStyle","style","height","width","initList","list","_list","renderList","menu","active","_scrollIntoView","filter","oninput","onkeydown","keyCode","gotoActiveItem","moveActiveItem","navigator","appVersion","indexOf","value","trim","toLowerCase","add_1","item","Array","isArray","_i","item_1","data","matchResult","_matchFilter","push","key","sort","x","y","level","html","append","items","items_1","_encodeHTML","dir","titleHtml","nameHtml","nameOfItem","toggleMenu","ul","nextSibling","_toggle","display","charAt","toUpperCase","delta","getElementsByTagName","pos","i","removeAttribute","next","setAttribute","toggleSidebar","closeSidebar_1","_contains","removeEventListener","toggleUnitTest","_toggleQuery","toggleFullScreen","toggleDemoCodes","hasCollapsed","toggleDemoCode","toggle","toggleApis","open","td","tr","table","tableLayout","_a","querySelectorAll","th","offsetWidth","hide","undefined","colSpan","copy","content","userAgent","prompt","textarea","select","execCommand","copyCode","textContent","onmouseout","gotoTop","require","alias","QUnit","config","autostart","define","assert","registerQUnitTests","exports","name_1","moduleStart","moduleDone","testStart","testDone","this","async","bind","module","exportModule","name_2","exportName","name","name_3","modules","callbacks","unshift","oldLoad","_load","url","writeList","columnCount","floor","globalTotal","addGroup","sections","total","minSection","items_2","title_1","sections_1","section","hasLevel3","h1","loading","ctrlKey","metaKey","activeElement","focus","id","getElementById","parent","prepend","div","_div","createElement","firstChild","insertBefore","removeChild","selector","callback","current","child","contains","documentElement","scrollTop","start","count","last","step","pow","setTimeout","scrollParent","alignCenter","deltaY","deltaHeight","offsetY","oldHeight","newHeight","overflow","clientLeft","webkitTransition","transition","RegExp","regexp","_title","_splitCharCodes","_pinyin","pinyin","split","_name","_words","_splitWord","keywords","_keywords","_keywordsPinYin","keywordsPinYin","titleResult","_matchPinYin","wordResult","_matchWord","keywordsResult","end","_insertMark","chars","result","charCodeAt","word","all","charCodes","pinyins","charIndex","filterIndex","matchCount","_searchStart","words","wordIndex","words_1","childIndex","points","point","m","&",">","<","\""],"mappings":"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"}