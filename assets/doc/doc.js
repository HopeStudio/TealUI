var Doc={init:function(e){if(Doc._meta=e,Doc._hasQuery("doc-fullscreen"))Doc._toggleClass(document.body,"doc-fullscreen"),Doc._each("#doc_header,#doc_sidebar,#doc_pager,#doc_footer,.doc-permalink",Doc._remove),Doc._get("doc_mainmenu").innerHTML='<a href="javascript:Doc.toggleFullScreen()" title="退出全屏"><i class="doc-icon">✠</i>退出全屏</a>';else{if(e.test&&Doc._hasQuery("doc-unittest")){document.title="单元测试："+document.title.replace(/\s*-[^\-]*$/,"");var t=Doc._get("doc_main");t.innerHTML='<aside id="doc_mainmenu" class="doc-menubutton" style="margin: -.25rem 1rem 0">\n                            <a href="javascript:Doc.toggleUnitTest()"><i class="doc-icon">✖</i>退出单元测试</a>\n                        </aside>\n                        <link rel="stylesheet" href="'+e.root+'/assets/doc/qunit.css">\n                        <div id="qunit"><span class="doc-tip"><i class="doc-icon doc-spin">҉</i> 正在载入测试用例...</span></div>\n                        <div id="qunit-fixture"></div>\n                        <div style="display: none" class="doc">'+t.innerHTML+"</div>";var o=Doc._get("doc_pager");o&&t.appendChild(o),Doc.runUnitTest(e.test)}Doc._insert('<div id="doc_progress"></div>'),Doc._insert('<a href="javascript:Doc.gotoTop()" id="doc_gototop" class="doc-icon doc-gototop-hide">↑</a>'),window.addEventListener("resize",Doc.relayout,!1),window.addEventListener("scroll",Doc.relayout,!1),window.addEventListener("load",Doc.relayout,!1)}Doc._each(".doc-menubutton>menu",function(e){e.onclick=function(){Doc._hasClass(e,"doc-menubutton-disable")||Doc._toggleClass(e,"doc-menubutton-disable")},e.parentNode.onmouseover=e.parentNode.ontouchstart=function(){Doc._hasClass(e,"doc-menubutton-disable")&&Doc._toggleClass(e,"doc-menubutton-disable")}}),Doc._each("a[href^='#']",function(e){e.onclick=function(t){var o=Doc._get(e.getAttribute("href").slice(1));o&&(Doc._scrollTo(document,o.getBoundingClientRect().top-5,!0),o.parentNode&&o.parentNode.parentNode&&"doc-api"===o.parentNode.parentNode.className&&Doc.toggleApi(o.querySelector("td > .doc-api-toggle"),!0),history.pushState(null,document.title,e.href),t.preventDefault())}}),Doc._each("#doc_pager a",function(e){e.href+=location.search});var n=location.hash.length>1&&Doc._get(location.hash.slice(1));n&&n.parentNode&&n.parentNode.parentNode&&"doc-api"===n.parentNode.parentNode.className&&Doc.toggleApi(n.querySelector("td > .doc-api-toggle"),!0),Doc.injectRequire()},relayout:function(){var e,t,o,n=window.innerHeight,c=Doc._get("doc_main").getBoundingClientRect().top,r=Doc._get("doc_footer").getBoundingClientRect().top,i=Doc._get("doc_togglesidebar").offsetHeight;i||c<=0?(e="fixed",t=0,o=i?n:Math.min(n,r)):(e="absolute",t="",o=n-c-Math.max(0,n-r));var a=Doc._get("doc_sidebar").style;a.position=e,a.top=t,Doc._get("doc_sidebar_menu").style.height=o-Doc._get("doc_sidebar_header").offsetHeight-1+"px",Doc._get("doc_progress").style.width=c<0?Math.max(0,Math.min(100*-c/(r-40-c-n),100))+"%":0,Doc._get("doc_gototop").className="doc-icon"+(c<=0?"":" doc-gototop-hide")},initList:function(e){Doc._list=e,Doc.renderList(),Doc.relayout();var t=Doc._get("doc_sidebar_menu"),o=t.querySelector(".doc-sidebar-active");o&&Doc._scrollIntoView(t,o,!0);var n=Doc._get("doc_sidebar_filter");n.oninput=Doc.renderList,n.onkeydown=function(e){switch(e.keyCode){case 10:case 13:Doc.gotoActiveItem();break;case 38:case 40:e.preventDefault(),Doc.moveActiveItem(38===e.keyCode?-1:1)}},navigator.appVersion.indexOf("Win")>=0&&(t.className="doc-hidescrollbar")},renderList:function(){var e=Doc._list,t=Doc._meta.active,o=Doc._get("doc_sidebar_filter").value.trim().toLowerCase();if(o){e=[];var n=function(t){if(Array.isArray(t))for(var c=0,r=t;c<r.length;c++){var i=r[c],a=Doc._matchFilter(i,o);a&&(a.href=i.href,a.title=i.title,e.push(a))}else for(var l in t)n(t[l])};n(Doc._list),e.sort(function(e,t){return t.level-e.level}),t=e[0]&&e[0].href}var c="",r=function(e){if(Array.isArray(e))for(var o=0,n=e;o<n.length;o++){var i=n[o],a=Doc._encodeHTML(i.title);c+="<li"+(i.href===t?' class="doc-sidebar-active" aria-selected="true"':"")+'><a href="'+Doc._meta.root+"/"+Doc._meta.dir+"/"+i.href+location.search+'" title="'+a+'">'+(i.titleHtml||a)+"<small>"+(i.nameHtml||Doc._encodeHTML(Doc.nameOfItem(i.href)))+"</small></a></li>"}else for(var l in e)c+='<li><span onclick="Doc.toggleMenu(this)">'+Doc._encodeHTML(l)+"</span><ul>",r(e[l]),c+="</ul></li>"};r(e),Doc._get("doc_sidebar_menu").innerHTML=o?c||'<li class="doc-tip"><i class="doc-icon">❗</i> 无匹配的结果</li>':c},toggleMenu:function(e){var t=e.nextSibling;Doc._toggle(t,t.style.display)},nameOfItem:function(e){return(e=e.replace(/(\/|\.html)$/,"").replace(/^.*\//,"")).charAt(0).toUpperCase()+e.slice(1)},gotoActiveItem:function(){var e=document.querySelector(".doc-sidebar-active a");e&&(location.href=e.href)},moveActiveItem:function(e){var t=Doc._get("doc_sidebar_menu"),o=t.getElementsByTagName("a");if(o[0]){for(var n=e<0?-1:0,c=0;o[c];c++)if("doc-sidebar-active"===o[c].parentNode.className){o[c].parentNode.className="",o[c].parentNode.removeAttribute("aria-selected"),n=c+e;break}n<0&&(n+=o.length);var r=(o[n]||o[0]).parentNode;r.className="doc-sidebar-active",r.setAttribute("aria-selected","true"),Doc._scrollIntoView(t,r)}},toggleSidebar:function(){if(Doc._toggleClass(document.body,"doc-sidebar-open"),Doc._hasClass(document.body,"doc-sidebar-open")){Doc.relayout();var e=function(t){Doc._contains(Doc._get("doc_sidebar"),t.target)||(t.preventDefault(),document.removeEventListener("touchend",e,!1),document.removeEventListener("mouseup",e,!1),Doc.toggleSidebar())};document.addEventListener("touchend",e,!1),document.addEventListener("mouseup",e,!1)}},toggleUnitTest:function(){Doc._toggleQuery("doc-unittest")},toggleFullScreen:function(){Doc._toggleQuery("doc-fullscreen")},toggleDemoCodes:function(){var e=!!document.querySelector(".doc-demo-collapsed");Doc._each(".doc-demo",function(t){Doc._hasClass(t,"doc-demo-collapsed")===e&&Doc.toggleDemoCode(t)})},toggleDemoCode:function(e){var t=Doc._hasClass(e,"doc-demo-collapsed");Doc._toggleClass(e,"doc-demo-collapsing"),Doc._toggle(e.querySelector(".doc-code"),t,function(){Doc._toggleClass(e,"doc-demo-collapsing"),Doc._toggleClass(e,"doc-demo-collapsed")});var o=e.querySelector(".doc-demo-toggle");o&&(o.setAttribute("aria-label",t?"折叠源码":"查看源码"),o.setAttribute("aria-checked",t))},toggleApis:function(){var e=!document.querySelector(".doc-api-open");Doc._each(".doc-api-toggle",function(t){Doc.toggleApi(t,e)})},toggleApi:function(e,t){var o=e.parentNode,n=o.parentNode,c=n.parentNode.parentNode;if(!c.style.tableLayout){for(var r=0,i=c.querySelectorAll(".doc-api>tbody>tr>th");r<i.length;r++){var a=i[r];a.style.width=100*a.offsetWidth/c.offsetWidth+"%"}c.style.tableLayout="fixed"}var l=Doc._hasClass(n,"doc-api-open");t!==undefined&&t===l||(l&&Doc._toggleClass(n,"doc-api-hiding"),Doc._toggle(o.querySelector(".doc-api-detail"),!l,function(){l&&Doc._toggleClass(n,"doc-api-hiding"),o.colSpan=l?0:5,Doc._toggleClass(n,"doc-api-open")}))},copy:function(e){if(/ipad|ipod|iphone|android|silk/i.test(navigator.userAgent))return prompt("请长按复制",e),!1;var t=Doc._insert('<textarea style="position:fixed;top:0;left:0;"></textarea>');t.value=e,t.select();try{return document.execCommand("copy")}catch(o){}finally{Doc._remove(t)}return prompt("请按 Ctrl/Command+C 复制",e),!1},copyCode:function(e){e.innerHTML=Doc.copy(e.nextSibling.textContent)?"✓":"✖",e.onmouseout=e.onmouseout||function(){e.innerHTML="❐"}},gotoTop:function(){Doc._scrollTo(document,0)},runUnitTest:function(e){require.alias.assert="assert",require(Doc._meta.root+"/assets/doc/qunit.js",function(t){t.config.autostart=!0,window.QUnit=t,define("assert",[],function(){return t.assert});var o=function(e){for(var n in e){var c=e[n];if("function"==typeof c){switch(n){case"before":t.moduleStart(c);continue;case"after":t.moduleDone(c);continue;case"beforeEach":t.testStart(c);continue;case"afterEach":t.testDone(c);continue}c.length?t.test(n,function(e){return this(e.async())}.bind(c)):t.test(n,c)}else t.module(n),o(c)}};require(e,o)})},injectRequire:function(){var e=function(e){for(var t in e.exports){var o="default"===t&&e.exports[t]&&e.exports[t].name||t;o in window||(window[o]=e.exports[t])}};for(var t in require.modules)!function(t){var o=require.modules[t];o.callbacks?o.callbacks.unshift(function(){e(o)}):e(o)}(t);var o=require._load;require._load=function(t,n){t.callbacks.unshift(function(){e(t)}),o(t,n)}},writeList:function(){var e=Doc._get("doc_main"),t=Math.floor(e.offsetWidth/200)||1,o=0,n=function(n,c){for(var r=[],i=0;i<t;i++)r.push({total:0,html:""});for(var a in n){for(var l=n[a],s=r[0],i=1;i<t;i++)r[i].total<s.total&&(s=r[i]);if(s.total+=l.length||0,s.html+='<h4 id="'+Doc._encodeHTML(a)+'">'+Doc._encodeHTML(a)+"<small>("+(l.length||"0")+")</small></h4><ul>",Array.isArray(l))for(var d=0,u=l;d<u.length;d++){var f=u[d],g=Doc._encodeHTML(f.title);s.html+='<li><a href="'+Doc._meta.root+"/"+Doc._meta.dir+"/"+f.href+'" title="'+g+'">'+g+"</a><small>"+Doc._encodeHTML(Doc.nameOfItem(f.href))+"</small></li>"}s.html+="</ul>"}for(var _=0,h="",m=0,p=r;m<p.length;m++){var v=p[m];_+=v.total,h+='<section class="doc-col doc">'+v.html+"</section>"}c&&Doc._insert('<h2 id="'+Doc._encodeHTML(c)+'"><a href="#'+Doc._encodeHTML(c)+'" title="链接" aria-hidden="true" class="doc-icon doc-permalink">☍</a>'+Doc._encodeHTML(c)+"<small>("+_+")</small></h2>",e),Doc._insert('<div class="doc-waterfall doc-row">'+h+"</div>",e),o+=_},c=Doc._list,r=!1;for(var i in c){r=!Array.isArray(c[i]);break}if(r)for(var i in c)n(c[i],i);else n(c);var a=document.querySelector("#doc_main>h1");a&&Doc._insert("<small>("+o+")</small>",a);var l=Doc._get("doc_loading");l&&Doc._remove(l),document.onkeydown=function(e){70===e.keyCode&&(e.ctrlKey||e.metaKey)&&document.activeElement!==Doc._get("doc_sidebar_filter")&&(Doc._get("doc_sidebar_filter").focus(),Doc._get("doc_sidebar_filter").select(),e.preventDefault())}},_get:function(e){return document.getElementById(e)},_insert:function(e,t,o){void 0===t&&(t=document.body);var n=Doc._div||(Doc._div=document.createElement("div"));return n.innerHTML=e,e=n.firstChild,o?t.insertBefore(e,t.firstChild):t.appendChild(e)},_remove:function(e){e.parentNode.removeChild(e)},_each:function(e,t){for(var o=0,n=document.querySelectorAll(e);o<n.length;o++)t(n[o])},_hasClass:function(e,t){return(" "+e.className).indexOf(" "+t)>=0},_toggleClass:function(e,t){t=" "+t;var o=" "+e.className;e.className=(o.indexOf(t)<0?o+t:o.replace(t,"")).trim()},_contains:function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},_scrollTo:function(e,t,o){if(e===document){var n=e.documentElement,c=e.body;n.scrollTop?e=n:c.scrollTop?e=c:(n.scrollTop=1,e=n.scrollTop?n:c,n.scrollTop=0)}o&&(t+=e.scrollTop);var r=e.scrollTop,i=t-r,a=0,l=r,s=function(){e.scrollTop===l&&(e.scrollTop=r+(1-Math.pow(1-a/25,3))*i,a++<25&&(l=e.scrollTop,setTimeout(s,20)))};s()},_scrollIntoView:function(e,t,o){var n=t.getBoundingClientRect().top-e.getBoundingClientRect().top,c=e.offsetHeight-t.offsetHeight;if(n<0||n>c){var r=o?c/2:0;e.scrollTop+=n-(n<0?r:c-r)}},_toggle:function(e,t,o){t&&(e.style.display="",o&&o());var n=e.offsetHeight,c=0;t&&(c=n,n=0),e.style.overflow="hidden",e.style.height=n+"px",e.clientLeft,e.style.webkitTransition=e.style.transition="height .3s",e.style.height=c+"px",setTimeout(function(){e.style.webkitTransition=e.style.transition=e.style.height=e.style.overflow="",t||(e.style.display="none",o&&o())},300)},_hasQuery:function(e){return new RegExp("([?&])"+e+"\\b").test(location.search)},_toggleQuery:function(e){var t=new RegExp("([?&])"+e+"\\b");t.test(location.search)?location.search=location.search.replace(t,"$1"):location.search+=(location.search.indexOf("?")>=0?"&":"?")+e},_matchFilter:function(e,t){e._title||(e._title=Doc._splitCharCodes(e.title),e._pinyin=e.pinyin.split(" "),e._name=e.href.replace(/\/$/,""),e._words=Doc._splitWord(e._name),e.keywords&&(e._keywords=Doc._splitCharCodes(e.keywords),e._keywordsPinYin=e.keywordsPinYin.split(" ")));var o=Doc._matchPinYin(e._title,e._pinyin,t),n=Doc._matchWord(e._words,t),c=e._keywords?Doc._matchPinYin(e._keywords,e._keywordsPinYin,t):[];if(o.length||n.length||c.length){var r=0;return o.length&&(0===o[0].start&&(r+=1e5),r+=(o[0].end-o[0].start)*o.length),n.length&&(0===n[0].start&&(r+=1e4),r+=(n[0].end-n[0].start)*n.length),c.length&&0===c[0].start&&r++,r-=e._title.length,{level:r,titleHtml:Doc._insertMark(e.title,o),nameHtml:Doc._insertMark(e._name,n)}}},_splitCharCodes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e.charCodeAt(o));return t},_splitWord:function(e){var t=[];return e.replace(/[A-Z][a-z]*|[a-z]+|./g,function(e){t.push(e.toLowerCase())}),t},_matchPinYin:function(e,t,o){var n=[];e:for(var c=0;c<e.length;c++){for(var r=c,i=0;i<o.length;){if(r>=e.length)continue e;if(e[r]===o.charCodeAt(i))i++;else for(var a=t[r];a;){var l=Doc._searchStart(a,o,i);if(l){i+=l;break}if(!(a.indexOf("|")>=0))continue e;a=a.slice(a.indexOf("|")+1)}r++}n.push({start:c,end:r}),c=r}return n},_matchWord:function(e,t){for(var o=[],n=0,c=0,r=0,i=e;r<i.length;r++){var a=i[r];n+=a.length;var l=this._searchStart(a,t,c);if(l){c+=l;var s=n-a.length;o.push({start:s,end:s+l})}}return c<t.length&&(o.length=0),o},_searchStart:function(e,t,o){for(var n=0;n<e.length&&o+n<t.length&&e.charCodeAt(n)===t.charCodeAt(o+n);)n++;return n},_insertMark:function(e,t){for(var o=t.length;o-- >0;){var n=t[o];e=Doc._encodeHTML(e.slice(0,n.start))+"<mark>"+Doc._encodeHTML(e.slice(n.start,n.end))+"</mark>"+(o===t.length-1?Doc._encodeHTML(e.slice(n.end)):e.slice(n.end))}return e},_encodeHTML:function(e){return e.replace(/[&><"]/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"}[e]})}};