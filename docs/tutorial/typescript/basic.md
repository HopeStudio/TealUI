TypeScript 零基础入门
========================================================
@author xuld@vip.qq.com
@copyright [XULD](http://work.xuld.net) 原创教程。转载请注明作者和出处。
@description 本教程适合未学过编程的完全零基础的读者。学完本教程，读者可以具备基本的 TypeScript 和 JavaScript 编程能力。

一、概述
--------------------------------------------------------

### 1.1 什么是编程以及学习编程需要哪些能力
编程，就是编写代码，然后让计算机去理解和执行代码，并最终让计算机去自动完成人们预设的目标。

程序往往有一个输入和输出，数据可以通过键盘、鼠标、触屏等方式输入，经过程序处理后，计算机会将数据以屏幕、声音、打印等方式输出。

编程的主要任务是处理数据，数据在计算机中是以数字的形式存在的，因此学习编程需要一点数学和逻辑的基础。
由于现在主流编程语言全部使用英文单词表示，因此熟悉英文也会对编程有很大的帮助。

### 1.2 JavaScript 简介
JavaScript 是一个由 Netscape 公司研发的脚本编程语言，
相比其它编程语言，JavaScript 更容易入门，非常适合初学者。

JavaScript 可以直接在浏览器(对，就是你平时用来看网页的那个软件)执行。
在浏览器地址栏输入 `javascript: alert("hello world")` 并回车。
可以看到浏览器弹出了一个窗口并显示了 hello world。
这就是一个简单的 JavaScript 程序。

> 提示：JavaScript 原名为 LiveScript，和编程语言 Java 没有多少联系。要了解 JavaScript 的发展历史，可自行搜索相关资料。

> 常见问题：
> [我不知道怎么打开浏览器](qa.md#我不知道怎么打开浏览器)
> [地址栏在哪里?](qa.md#地址栏在哪里)
> [为什么我执行代码没有出现弹窗?](qa.md#为什么我执行代码没有弹窗)

### 1.3 TypeScript 简介
TypeScript 是由微软研发的 JavaScript 扩展语言。
TypeScript 可以直接转换成 JavaScript 并执行。
相比 JavaScript，使用 TypeScript 可以减少错误率，提升总体编程效率。

### 1.4 第一份代码
TypeScript 脚本文件的扩展名一般是 `.ts`。
TypeScript 代码区分字母大小写，编写时请注意大小写。

#### 1. 新建 `hello.ts`
保存以下内容：
```ts
alert("你好");
```

> 提示：要编辑代码，可以使用任意的文本编辑软件。这里推荐一些专业的代码编辑器：[vscode](https://code.visualstudio.com/)(推荐)、[sublime](http://www.sublimetext.com/)、[Webstorm](https://www.jetbrains.com/webstorm/)、[Microsoft Visual Studio](https://www.visualstudio.com/)。

> 常见问题：
> [怎么新建 `hello.ts`?](qa.md#怎么新建hellots)
> [什么是扩展名?](qa.md#什么是扩展名)
> [怎么更改文件的扩展名?](qa.md#怎么更改文件的扩展名)

#### 2. 编译 `hello.ts` 到 `hello.js`
为了执行代码，我们需要先将 TypeScript 编译成 JavaScript。
编译的方式有很多，这里列举几个最通用的做法。

##### 使用 NodeJS
1. 安装 [NodeJs 和 NPM](http://nodejs.org/)。
2. 执行命令 `npm install typescript -g` 安装 TypeScript 编译器。
3. 执行命令 `tsc hello.ts` 生成 `hello.js`。

> 常见问题：
> [怎么执行命令?](qa.md#怎么执行命令)
> [提示 `“node” 不是内部或外部命令，也不是可运行的程序` 怎么办?](qa.md#提示node不是内部或外部命令也不是可运行的程序怎么办)
> [提示 `“npm” 不是内部或外部命令，也不是可运行的程序` 怎么办?](qa.md#提示npm不是内部或外部命令也不是可运行的程序怎么办)
> [提示 `“tsc” 不是内部或外部命令，也不是可运行的程序` 怎么办?](qa.md#提示tsc不是内部或外部命令也不是可运行的程序怎么办)
> [提示 `找不到 “hello.ts”` 怎么办?](qa.md#找不到hellots怎么办)
> [找不到 `hello.js` 怎么办?](qa.md#[找不到hellojs怎么办)

##### 使用 Microsoft Visual Studio 2015
1. 启动 Microsoft Visual Studio 2015。
2. 点击工具/选项.../文本编辑器/TypeScipt/项目，右边勾上“自动编译不是项目一部分的 TypeScript 文件”并确定。
3. 点击文件/新建/新建网站/输入名字后确认。
4. 右击“解决方案浏览器”中的网站名/添加/JavaScript 文件。文件名写 `hello.ts` 并确认。
5. 编写代码并保存。
6. 右击“解决方案浏览器”中的网站名/刷新文件夹，可以看到生成了 `hello.js`。
7. 每次重新保存代码时，都会重新生成这个文件。

> 常见问题：
> [其它编辑怎么编译 TypeScript?](qa.md#其它编辑怎么编译TypeScript)

#### 3. 执行 `hello.js`
新建 `hello.html`，保存以下代码：
```html
<meta charset="utf-8">
<script src="hello.js"></script>
```
然后在浏览器打开 `hello.html`，
如果浏览器弹出了 "你好" 说明执行成功。

> 常见问题：
> [如何在浏览器打开 `hello.html`?](qa.md#如何在浏览器打开hellohtml)
> [我的浏览器打开是空白页没有弹窗?](qa.md#我的浏览器打开是空白页没有弹窗)
> [出现乱码?](qa.md#出现乱码)

> 练习:
> 1. 按照示例编写第一份代码，在浏览器打开并查看效果。
> 2. 更改代码中的 `你好` 为其它文字，看看效果。
> 3. 更改代码中的 `alert` 为 `prompt`，看看效果。


二、类型
--------------------------------------------------------
编程的主要任务是处理数据，而要正确处理数据，就必须先了解数据的类型(Type)。
根据数据类型的不同，处理方式也不同。

TypeScript 内置了以下数据类型：

- `number`
- `boolean`
- `string`
- `null`
- `void`(在 JavaScript 称为 `undefined`)
- `any`(TypeScript 特有)
- `Array`
- `Object`
- `Function`
- `Date`

**对于每种类型，都需要熟练掌握其格式规范、类型表示方式以及支持的运算，这是编程的基础。**
掌握格式规范，就可以根据类型写出合法的值；
掌握类型表示方式，就可以根据值写出其类型名；
掌握支持的运算，就可以根据值作正确的操作。

下面将依次介绍这几个类型。

### 2.1 `number`: 数字
数字包括整数和小数。

#### `number` 格式规范

数字可以使用以下任一格式表示：

- 十进制：十进制格式就是日常生活广泛使用的数字格式，如 `0`, `3.1415926`。
- 科学计数法：如 `3e4` 或 `3E4`, 值为 3 × e<sup>4</sup>(其中 `e` 是数学中的自然常数)。字符 `e` 后可以紧跟一个 `+`(正) 或 `-`(负) 号。
- 十六进制：以 `0x` 或 `0X` 开头，如 `0xFf`。
- 八进制：以 `0o` 或 `0O` 开头，如 `0o74563`。
- 二进制：以 `0b` 或 `0B` 开头，如 `0b0010`。

> 提示：整数可以使用任意格式表示，小数则只能使用十进制或科学计数法格式。
> 提示：小数点前的 `0` 可以省略，如 `.01`。
> 提示：受存储空间的限制，数字可表示的范围是 [5e-324, 1.7976931348623157e+308)。

> 常见问题：
> [什么是进制?](qa.md#什么是进制)
> [什么是科学计数法?](qa.md#什么是科学计数法)
> [什么是自然常数?](qa.md#自然常数)

> 练习: 以下哪些是合法的数字?
> - 0
> - .123
> - 3.
> - .
> - 2011.11.11
> - -1
> - 1 + 1
> - 0x
> - 0xWHO
> - 00000
> - 4e-3
> - 4e - 3
> - FF
> - 0b2
> - 200f
> - 200x
> - 98%

除了以上的普通数字，计算机中还存在两个特殊的数字：`Infinity` 和 `NaN`。

- `Infinity` 表示正无穷大(∞)，`1 ÷ 0` 的值为 `Infinity`。
- `NaN`(Not A Number, 不是数字)表示无意义的数字，`0 ÷ 0` 的值为 `NaN`。

#### `number` 类型表示方式
数字类型表示方式统一为 `number` 或 `Number`。

#### `number` 支持的运算
数字可以作很多运算，包括：数学运算、比较运算和位运算。

##### 数学运算
数学运算有：`+`(加/正), `-`(减/负), `*`(乘), `-`(除), `%`(取余)。
其中 `%` 表示计算前者除以后缀的余数，如 `8 % 5` 等于 `3`。`x % y` 等价于 `x - (x 整除 y) * y`。

代码中的运算和数学公式相同，也存在优先级。
要更改优先级，需要使用小括号，如 `(1 - (2 - 4)) * 3`。

计算时需要两个操作数的运算，称为双目运算，如 `1 + 1` 中的 `+`(加)。
计算时只需要一个操作数的运算，称为单目运算，如 `+1` 中的 `+`(正)。

两个数字作数学运算后一定会返回一个数字类型的值。

> 注意：由于计算机内部是使用二进制表示数字的，而小数的二进制和十进制转换会出现误差，因此在数学运算时可能出现微量的误差，所以计算货币时应特殊处理。

> 练习: 计算下列表达式的值：
> - 1 + 1
> - -0
> - 1 / 0
> - (1 - 1) / (1 - 1)
> - 0xf - 0xe
> - 29 % 100
> - 2.4 % 2.3
> - 1 / 3
> - (1 - 4) / (500000 - 500000)
> - -1 - -1

##### 比较运算
比较运算有：`==`(等于), `===`(严格等于), `!=`(不等于), `!==`(不严格等于), `< `(小于), `>`(大于), `<=`(小于等于), `>=`(大于等于)。
    
比较运算总是返回布尔类型的值。布尔类型主要用于表示真假(对错/是否)，具体将在下一节介绍。

##### 位运算
位运算是计算机领域特定的计算。
计算机内部使用二进制存储数字，直接对这些二进制数值操作的运算就是位运算。
位运算有 `&`(位与), `|`(位或), `<< `(左移), `>>`(右移), `>>>`(无符右移), `~`(位反)。

###### `&`(位与)：按位合并，如果两个数字都为 1 则返回 1，否则返回 0。

如计算 `3 & 6` 的方法：

1. 取整并转为二进制格式：`0b0011 & 0b0110`。
2. 取左值第一位：`0`；取右值第一位：`0`；计算 `0 & 0` 返回 `0`。
3. 取左值第二位：`0`；取右值第二位：`1`；计算 `0 & 1` 返回 `0`。
4. 取左值第三位：`1`；取右值第三位：`1`；计算 `1 & 1` 返回 `1`。
5. 取左值第四位：`1`；取右值第四位：`0`；计算 `1 & 0` 返回 `0`。
6. 合并结果，得到 `0b0010`，即 `2`。

###### `|`(位或)：按位合并，如果两个数字任一个为 1 则返回 1，否则返回 0。

如计算 `3 | 6` 的方法：

1. 取整并转为二进制格式：`0b0011 & 0b0110`。
2. 取左值第一位：`0`；取右值第一位：`0`；计算 `0 & 0` 返回 `0`。
3. 取左值第二位：`0`；取右值第二位：`1`；计算 `0 & 1` 返回 `1`。
4. 取左值第三位：`1`；取右值第三位：`1`；计算 `1 & 1` 返回 `1`。
5. 取左值第四位：`1`；取右值第四位：`0`；计算 `1 & 0` 返回 `1`。
6. 合并结果，得到 `0b0111`，即 `7`。

###### `<< `(左移)：按位向左移动，低位补 0。

如计算 `3 << 2` 的方法：

1. 取整并转为二进制格式：`0b00000011 << 2`。
2. 向左移动 `2` 位；即删除高位(左边)的 2 个 0，返回 `0b000011`
3. 低位(右边)补 2 个 0，返回 `0b00001100`，即 12。

> 提示: `x << y` 等价于 `x × 2`<sup>`y`</sup>。

###### `>>`(右移)：按位向右移动，高位补原来的最高位。

如计算 `3 >> 2` 的方法：

1. 取整并转为二进制格式：`0b00000011 >> 2`。
2. 向右移动 `2` 位；即删除低位(右边)的 2 个 0，返回 `0b000000`
3. 高位(左边)补 2 个 `0b00000011` 的最高位(即 0)，返回 `0b00000000`，即 0。

> 提示: `x >> y` 等价于 `x ÷ 2`<sup>`y`</sup>。

###### `>>>`(无符右移)：按位向右移动，高位补 0。

###### `~`(位反)：按位更新，原来为 1 返回 0，原来为 0 返回 1。

如计算 `~3` 的方法：

1. 取整并转为二进制格式：`0b000...011`。
2. 每位取反，得到 `0b111...100`，即 `-4`。

> 提示: `~x` 等价于 `-x - 1`。
> 提示: `~~x` 等价于 `取整(x)`。

> 注意：执行位运算时所有操作数都先会转为整数。整数的表示范围是 [0, 2`<sup>`64`</sup>)，超过这个范围的数值执行位运算会导致数值偏差。

### 2.2 `boolean`: 布尔
布尔型可以用于表示一个真或假的值。
比如数字比较时会返回一个布尔型的值以表示真假。

#### `boolean` 格式规范
布尔型的值只可能是：`true`(表示真) 和 `false`(表示假)。

#### `boolean` 类型表示方式
布尔型表示方式统一为 `boolean` 或 `Boolean`。

#### `boolean` 支持的运算
布尔型只能作逻辑运算。
逻辑运算有：`&&`(与), `||`(或), `!`(非)。

- `&&`(与): 全为 `true` 才返回 `true`，否则返回 `false`。
- `||`(或): 任意 `true` 则返回 `true`，否则返回 `false`。
- `!`(非): `!true` 返回 `false`，`!false` 返回 `true`。

根据以上可以得到下表：

    x   |    y   | x && y | x || y |   !x   |  !y
--------|--------|--------|--------|--------|--------
  false | false  |  false |  false |  true  |  true 
  true  | false  |  false |  true  |  false |  true 
  true  | true   |  true  |  true  |  false |  false 

数字比较返回布尔型值，如 `4 > 3 && 2 < 5` 返回 `true`。

### 2.2 `string`: 字符串
字符串即一段文本。

#### `string` 格式规范



#### `string` 类型表示方式

#### `string` 支持的运算

一定是使用 `'`、`"` 或 `\`` 包围的，如。
```
'hello'
"我是字符串"
`我也是字符串`
```

如果字符串本身包含 `'、"`、换行 等特殊字符，则需要使用转义字符。
转义字符是以 \ 开头的特殊字符。
TypeScript 支持使用以下转义字符：

- `'\n'`：表示一个换行。
- `'\r'`：表示一个回车符。
- `'\''`：表示一个单引号(')。
- `'\"'`：表示一个双引号(")。
- `'\\'`：表示一个反斜杠(\)。
- `'\t'`：表示一个制表符。
- `'\b'`：表示一个退格符。
- `'\0'`：表示一个空字符。
- `'\x##'`：表示一个 ASCII 字符，其中 ## 是对应 ASCII 字符的十六进制编码。
- `'\u####'`：表示一个 Unicode 字符，其中 #### 是对应 Unicode 字符的十六进制编码。

比如要在字符串中包含一个单引号，使用 '我是字符串，符号 `\'` 表示字符串开始。`'`，
其中 `\'` 表示一个单引号，避免 ' 被误认为是字符串结束标记。
在单引号字符串中，双引号可以不用转义，反之亦然。

使用 `\`` 包围的字符也叫模板字符串，模板字符串中可以使用 `${ ... }` 包含另一段代码，具体会在字符串加法运算时再作介绍。
如果不希望 `${}` 被误认为代码段，同样需要使用转义字符，写成 `\${ ... }`。

不包含任何文本的字符串(即 `""`) 叫做空字符串。