{"version":3,"file":"delegate.js","sources":["delegate.ts"],"sourcesContent":["/**\r\n * 表示一个委托。\r\n */\r\nexport default class Delegate extends Function {\r\n\r\n    /**\r\n     * 获取所有委托的函数。\r\n     */\r\n    funcs: Function[];\r\n\r\n    /**\r\n     * 初始化新的委托。\r\n     * @param funcs 所有委托的函数。\r\n     */\r\n    constructor(...funcs: Function[]) {\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * 添加一个委托函数。\r\n     * @param func 要添加的函数。\r\n     * @example\r\n     * var del = new Delegate()\r\n     * del.add(() => { console.log(\"teal\") })\r\n     * del() // 控制台输出 teal\r\n     */\r\n    add(func: Function) {\r\n        this.funcs.push(func);\r\n    }\r\n\r\n    /**\r\n     * 删除一个委托函数。\r\n     * @param func 要删除的函数。\r\n     * @example\r\n     * var fn = () => { console.log(\"teal\") }\r\n     * var del = new Delegate()\r\n     * del.add(fn)\r\n     * del.remove(fn)\r\n     * del() // 控制台不输出\r\n     */\r\n    remove(func: Function) {\r\n        const index = this.funcs.indexOf(func);\r\n        if (index >= 0) {\r\n            this.funcs.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除所有委托函数。\r\n     * var del = new Delegate()\r\n     * del.add(() => { console.log(\"teal\") })\r\n     * del.clear()\r\n     * del() // 控制台不输出\r\n     */\r\n    clear() {\r\n        this.funcs.length = 0;\r\n    }\r\n\r\n}\r\n\r\nconst prototype = Delegate.prototype;\r\nconst func = exports.default = function Delegate(...funcs: Function[]) {\r\n    const delegate = function (this: any) {\r\n        for (const handler of delegate.funcs) {\r\n            handler.apply(this, arguments);\r\n        }\r\n    } as any as Delegate;\r\n    if ((delegate as any).__proto__) {\r\n        (delegate as any).__proto__ = func.prototype;\r\n    } else {\r\n        for (const key in func.prototype) {\r\n            (delegate as any)[key] = func.prototype[key];\r\n        }\r\n    }\r\n    delegate.funcs = funcs;\r\n    return delegate;\r\n};\r\nfunc.prototype = prototype;\r\n"],"mappings":";;;;;;;;;;;;;IAAA;;OAEG;IACH;QAAsC,4BAAQ;QAO1C;;;WAGG;QACH;YAAY,eAAoB;iBAApB,UAAoB,EAApB,qBAAoB,EAApB,IAAoB;gBAApB,0BAAoB;;mBAC5B,iBAAO;QACX,CAAC;QAED;;;;;;;WAOG;QACH,sBAAG,GAAH,UAAI,IAAc;YACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1B,CAAC;QAED;;;;;;;;;WASG;QACH,yBAAM,GAAN,UAAO,IAAc;YACjB,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACvC,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;gBACb,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAChC,CAAC;QACL,CAAC;QAED;;;;;;WAMG;QACH,wBAAK,GAAL;YACI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1B,CAAC;QAEL,eAAC;IAAD,CAAC,AAvDD,CAAsC,QAAQ,GAuD7C;;IAED,IAAM,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;IACrC,IAAM,IAAI,GAAG,OAAO,CAAC,OAAO,GAAG;QAAkB,eAAoB;aAApB,UAAoB,EAApB,qBAAoB,EAApB,IAAoB;YAApB,0BAAoB;;QACjE,IAAM,QAAQ,GAAG;YACb,GAAG,CAAC,CAAkB,UAAc,EAAd,KAAA,QAAQ,CAAC,KAAK,EAAd,cAAc,EAAd,IAAc;gBAA/B,IAAM,OAAO,SAAA;gBACd,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;aAClC;QACL,CAAoB,CAAC;QACrB,EAAE,CAAC,CAAE,QAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;YAC7B,QAAgB,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QACjD,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC9B,QAAgB,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACjD,CAAC;QACL,CAAC;QACD,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;QACvB,MAAM,CAAC,QAAQ,CAAC;IACpB,CAAC,CAAC;IACF,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC"}