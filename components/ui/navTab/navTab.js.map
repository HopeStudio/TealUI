{"version":3,"file":"navTab.js","sources":["navTab.tsx"],"sourcesContent":["import * as dom from \"web/dom\";\r\nimport { scrollSize, scrollBy, scrollIntoViewIfNeeded } from \"web/scroll\";\r\nimport Control, { VNode, bind } from \"ui/control\";\r\nimport active from \"web/active\";\r\nimport \"typo/icon/icon.scss\";\r\nimport \"typo/close/close.scss\";\r\nimport \"./navTab.scss\";\r\n\r\n/**\r\n * 表示一个导航标签。\r\n */\r\nexport default class NavTab extends Control {\r\n\r\n    /**\r\n     * 是否隐藏关闭按钮。\r\n     */\r\n    hideClose: boolean;\r\n\r\n    /**\r\n     * 是否隐藏最后一个标签页的关闭按钮。\r\n     */\r\n    hideLastClose: boolean;\r\n\r\n    /**\r\n     * 翻页按钮每次滚动距离。\r\n     * @default 120\r\n     */\r\n    scrollDelta: number;\r\n\r\n    /**\r\n     * 是否在窗口大小改变后自动重新对齐。\r\n     * @default true\r\n     */\r\n    autoResize: boolean;\r\n\r\n    /**\r\n     * 添加标签事件。\r\n     * @param tab 标签。\r\n     * @param sender 事件源。\r\n     */\r\n    onAddTab: (tab: HTMLElement, sender: this) => void;\r\n\r\n    /**\r\n     * 移除标签事件。\r\n     * @param tab 标签。\r\n     * @param sender 事件源。\r\n     */\r\n    onRemoveTab: (tab: HTMLElement, sender: this) => void;\r\n\r\n    /**\r\n     * 关闭标签事件。\r\n     * @param tab 标签。\r\n     * @param e 事件。\r\n     * @param sender 事件源。\r\n     * @return 如果函数返回 false 则终止事件。\r\n     */\r\n    onCloseTab: (tab: HTMLElement, e: MouseEvent | undefined, sender: this) => boolean | void;\r\n\r\n    /**\r\n     * 选择标签事件。\r\n     * @param tab 标签。\r\n     * @param e 事件。\r\n     * @param sender 事件源。\r\n     * @return 如果函数返回 false 则终止事件。\r\n     */\r\n    onSelect: (tab: HTMLElement | null | undefined, e: MouseEvent | undefined, sender: this) => boolean | void;\r\n\r\n    /**\r\n     * 选中标签改变事件。\r\n     * @param oldTab 原标签。\r\n     * @param newTab 新标签。\r\n     * @param e 事件。\r\n     * @param sender 事件源。\r\n     */\r\n    onChange: (oldTab: HTMLElement | null | undefined, newTab: HTMLElement, e: MouseEvent | undefined, sender: this) => void;\r\n\r\n    protected render() {\r\n        return <nav class=\"x-navtab\">\r\n            <a href=\"javascript:;\" class=\"x-navtab-left x-icon\">⮜</a>\r\n            <a href=\"javascript:;\" class=\"x-navtab-right x-icon\">⮞</a>\r\n            <div class=\"x-navtab-container\">\r\n                <ul class=\"x-navtab-body\" role=\"tablist\"></ul>\r\n                <div class=\"x-navtab-bar\"></div>\r\n            </div>\r\n        </nav>;\r\n    }\r\n\r\n    /**\r\n     * 向左滚动按钮。\r\n     */\r\n    @bind(\".x-navtab-left\") leftButton: HTMLElement;\r\n\r\n    /**\r\n     * 向右滚动按钮。\r\n     */\r\n    @bind(\".x-navtab-right\") rightButton: HTMLElement;\r\n\r\n    /**\r\n     * 容器。\r\n     */\r\n    @bind(\".x-navtab-container\") container: HTMLElement;\r\n\r\n    /**\r\n     * 主体。\r\n     */\r\n    @bind(\".x-navtab-body\") body: HTMLElement;\r\n\r\n    /**\r\n     * 指示当前激活标签页的条。\r\n     */\r\n    @bind(\".x-navtab-bar\") bar: HTMLElement;\r\n\r\n    /**\r\n     * 获取所有标签页。\r\n     */\r\n    get tabs() { return dom.children(this.body); }\r\n\r\n    protected init() {\r\n        dom.on(this.elem, \"mousewheel\", this.handleMouseWheel, this);\r\n        active(this.leftButton, e => { this.handleScrollLeftPointerDown(e); });\r\n        active(this.rightButton, e => { this.handleScrollRightPointerDown(e); });\r\n        dom.on(this.container, \"scroll\", this.handleScroll, this);\r\n        dom.on(this.body, \"pointerup\", \"li\", this.handleItemPointerUp, this);\r\n        dom.on(this.body, \"click\", \"li\", this.handleItemClick, this);\r\n        this.autoResize && dom.on(window, \"resize\", () => { this.realign(); });\r\n    }\r\n\r\n    /**\r\n     * 处理滚轮事件。\r\n     * @param e 事件。\r\n     */\r\n    protected handleMouseWheel(e: WheelEvent) {\r\n        e.preventDefault();\r\n        scrollBy(this.container, { x: -e.wheelDelta * this.scrollDelta / 120 }, this.duration);\r\n    }\r\n\r\n    /**\r\n     * 处理左滚按住事件。\r\n     * @param e 事件。\r\n     */\r\n    protected handleScrollLeftPointerDown(e: MouseEvent) {\r\n        scrollBy(this.container, { x: -this.scrollDelta }, this.duration);\r\n    }\r\n\r\n    /**\r\n     * 处理右滚按住事件。\r\n     * @param e 事件。\r\n     */\r\n    protected handleScrollRightPointerDown(e: MouseEvent) {\r\n        scrollBy(this.container, { x: this.scrollDelta }, this.duration);\r\n    }\r\n\r\n    /**\r\n     * 处理滚动事件。\r\n     * @param e 事件。\r\n     */\r\n    protected handleScroll(e: MouseEvent) {\r\n        dom.toggleClass(this.leftButton, \"x-navtab-disabled\", this.container.scrollLeft === 0);\r\n        dom.toggleClass(this.rightButton, \"x-navtab-disabled\", this.container.scrollLeft + this.container.offsetWidth >= this.container.scrollWidth);\r\n    }\r\n\r\n    /**\r\n     * 处理指针在标签项松开事件。\r\n     * @param e 事件。\r\n     * @param tab 当前标签项。\r\n     */\r\n    protected handleItemPointerUp(e: MouseEvent, tab: HTMLElement) {\r\n        if (e.button === 1) {\r\n            this.closeTab(tab, e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理指针点击事件。\r\n     * @param e 事件。\r\n     * @param tab 当前标签项。\r\n     */\r\n    protected handleItemClick(e: MouseEvent, tab: HTMLElement) {\r\n        if (dom.hasClass(e.target as HTMLElement, \"x-close\")) {\r\n            this.closeTab(tab, e);\r\n        } else {\r\n            this.selectTab(tab, e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭标签页。\r\n     * @param tab 标签。\r\n     * @param e 事件。\r\n     * @return 如果关闭成功则返回 true，否则返回 false。\r\n     */\r\n    closeTab(tab: HTMLElement, e?: MouseEvent) {\r\n        if (this.hideClose) {\r\n            return false;\r\n        }\r\n        if (this.hideLastClose && dom.first(this.body) === tab && tab === dom.last(this.body)) {\r\n            return false;\r\n        }\r\n        if (this.onCloseTab && this.onCloseTab(tab, e, this) === false) {\r\n            return false;\r\n        }\r\n        const reselect = this.selectedTab === tab;\r\n        this.removeTab(tab);\r\n        if (reselect) {\r\n            const nextTab = this.tabHistoryBack.pop();\r\n            if (nextTab) {\r\n                this.selectTab(nextTab, e);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 选中的标签页。\r\n     */\r\n    get selectedTab() {\r\n        return this.find(\".x-navtab-selected\") as HTMLElement | null;\r\n    }\r\n    set selectedTab(value) {\r\n        this._setSelectedTab(this.selectedTab, value, this.duration);\r\n    }\r\n\r\n    /**\r\n     * 标签后退历史。\r\n     */\r\n    tabHistoryBack: HTMLElement[] = [];\r\n\r\n    /**\r\n     * 选择一个标签。\r\n     * @param tab 标签。\r\n     * @param duration 对齐使用的动画毫秒数。如果为 0 则不使用动画。\r\n     * @return 如果选择成功则返回 true，否则返回 false。\r\n     */\r\n    selectTab(tab: HTMLElement, e?: MouseEvent, duration?: number) {\r\n        if (this.onSelect && this.onSelect(tab, e, this) === false) {\r\n            return false;\r\n        }\r\n        const selectedTab = this.selectedTab;\r\n        if (selectedTab === tab) {\r\n            return false;\r\n        }\r\n        this._setSelectedTab(selectedTab, tab, duration);\r\n        this.onChange && this.onChange(selectedTab, tab, e, this);\r\n        return true;\r\n    }\r\n\r\n    private _setSelectedTab(oldTab: HTMLElement | null | undefined, newTab: HTMLElement | null | undefined, duration?: number) {\r\n        if (oldTab) {\r\n            dom.removeClass(oldTab, \"x-navtab-selected\");\r\n            oldTab.setAttribute(\"aria-selected\", \"false\");\r\n        }\r\n        if (newTab) {\r\n            dom.addClass(newTab, \"x-navtab-selected\");\r\n            newTab.setAttribute(\"aria-selected\", \"true\");\r\n        }\r\n        this.realignBar(newTab, duration);\r\n        if (newTab && this.tabHistoryBack[this.tabHistoryBack.length - 1] !== newTab) {\r\n            this.tabHistoryBack.push(newTab);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 添加一个标签。\r\n     * @param title 标签名。\r\n     * @param select 是否同时选择标签。\r\n     * @param duration 对齐使用的动画毫秒数。如果为 0 则不使用动画。\r\n     * @return 返回新建的标签。\r\n     */\r\n    addTab(title: string, select = true, duration?: number) {\r\n        const tab = dom.append(this.body, `<li role=\"tab\" style=\"width:0\"><button class=\"x-close x-icon\" title=\"关闭\" aria-label=\"关闭\">✖</button><a href=\"javascript:;\"></a></li>`) as HTMLElement;\r\n        const tabBody = tab.lastChild as HTMLElement;\r\n        tabBody.title = tabBody.textContent = title;\r\n        if (this.hideClose) {\r\n            dom.hide(tab.firstChild as HTMLElement);\r\n        }\r\n        this.tabHistoryBack.push(tab);\r\n        this.realign(duration);\r\n        this.onAddTab && this.onAddTab(tab, this);\r\n        if (select) {\r\n            this.selectTab(tab, undefined, duration);\r\n        }\r\n        return tab;\r\n    }\r\n\r\n    /**\r\n     * 删除一个标签。\r\n     * @param tab 标签。\r\n     * @param active 是否重新激活最后打开的标签。\r\n     * @param duration 对齐使用的动画毫秒数。如果为 0 则不使用动画。\r\n     */\r\n    removeTab(tab: HTMLElement, duration?: number) {\r\n        let p: number;\r\n        while ((p = this.tabHistoryBack.indexOf(tab)) >= 0) this.tabHistoryBack.splice(p, 1);\r\n\r\n        this.realign(duration, tab);\r\n        this.onRemoveTab && this.onRemoveTab(tab, this);\r\n    }\r\n\r\n    /**\r\n     * 根据标签页的数目重新调整标签页大小。\r\n     * @param duration 对齐使用的动画毫秒数。如果为 0 则不使用动画。\r\n     * @param removing 正在渐变隐藏的标签。\r\n     */\r\n    realign(duration = this.duration, removing?: HTMLElement | null) {\r\n        dom.removeClass(this.elem, \"x-navtab-overflow\");\r\n        const tabCount = this.body.childNodes.length + (removing ? -1 : 0);\r\n        dom.toggle(this.bar, tabCount > 0);\r\n        if (this.hideLastClose && !this.hideClose) {\r\n            this.query(\".x-close\").forEach((elem: HTMLElement) => {\r\n                dom.toggle(elem, tabCount > 1, \"opacity\");\r\n            });\r\n        }\r\n        const totalWidth = this.body.offsetWidth;\r\n        const maxTabWidth = totalWidth / tabCount;\r\n        let width = 0;\r\n        let leftCount = tabCount;\r\n        for (let node = this.body.firstChild as HTMLElement; node; node = node.nextSibling as HTMLElement) {\r\n            if (node === removing) {\r\n                dom.animate(node, { width: 0, minWidth: 0, opacity: 0 }, () => {\r\n                    dom.remove(node);\r\n                    node.style.minWidth = \"\";\r\n                }, duration);\r\n            } else {\r\n                const margin = dom.computeStyle(node, \"marginLeft\", \"marginRight\");\r\n                const tabWidth = node === removing ? 0 : Math.max(Math.min(maxTabWidth - margin, dom.computeStyle(node, \"maxWidth\") || Infinity), dom.computeStyle(node, \"minWidth\"));\r\n                dom.animate(node, { width: tabWidth }, () => {\r\n                    if (--leftCount <= 0) {\r\n                        this.realignBar(this.selectedTab, duration);\r\n                    }\r\n                }, duration);\r\n                width += tabWidth + margin;\r\n            }\r\n        }\r\n        if (width > totalWidth) {\r\n            dom.addClass(this.elem, \"x-navtab-overflow\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 重新对齐指示条。\r\n     * @param tab 选中的标签。\r\n     * @param duration 对齐使用的动画毫秒数。如果为 0 则不使用动画。\r\n     */\r\n    realignBar(tab: HTMLElement | null | undefined, duration?: number) {\r\n        let width = 0;\r\n        for (let node = this.body.firstChild as HTMLElement; node; node = node.nextSibling as HTMLElement) {\r\n            const tabWidth = parseFloat(node.style.width!) || 0;\r\n            if (node === tab) {\r\n                dom.animate(this.bar, { width: tabWidth, left: width });\r\n                scrollIntoViewIfNeeded(node, this.container, duration);\r\n                break;\r\n            }\r\n            width += tabWidth + dom.computeStyle(node, \"marginLeft\", \"marginRight\");\r\n        }\r\n    }\r\n}\r\n\r\nNavTab.prototype.autoResize = true;\r\nNavTab.prototype.scrollDelta = 100;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;IAQA;;OAEG;IACH;QAAoC,0BAAO;QAA3C;YAAA,qEAwVC;YArIG;;eAEG;YACH,oBAAc,GAAkB,EAAE,CAAC;;QAkIvC,CAAC;QAvRa,uBAAM,GAAhB;YACI,MAAM,CAAC,gCAAK,KAAK,EAAC,UAAU;gBACxB,8BAAG,IAAI,EAAC,cAAc,EAAC,KAAK,EAAC,sBAAsB,aAAM;gBACzD,8BAAG,IAAI,EAAC,cAAc,EAAC,KAAK,EAAC,uBAAuB,aAAM;gBAC1D,gCAAK,KAAK,EAAC,oBAAoB;oBAC3B,+BAAI,KAAK,EAAC,eAAe,EAAC,IAAI,EAAC,SAAS,GAAM;oBAC9C,gCAAK,KAAK,EAAC,cAAc,GAAO,CAC9B,CACJ,CAAC;QACX,CAAC;QA8BD,sBAAI,wBAAI;YAHR;;eAEG;iBACH,cAAa,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;;WAAA;QAEpC,qBAAI,GAAd;YAAA,iBAQC;YAPG,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;YAC7D,gBAAM,CAAC,IAAI,CAAC,UAAU,EAAE,UAAA,CAAC,IAAM,KAAI,CAAC,2BAA2B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,gBAAM,CAAC,IAAI,CAAC,WAAW,EAAE,UAAA,CAAC,IAAM,KAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACzE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;YAC1D,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YACrE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;YAC7D,IAAI,CAAC,UAAU,IAAI,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,cAAQ,KAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3E,CAAC;QAED;;;WAGG;QACO,iCAAgB,GAA1B,UAA2B,CAAa;YACpC,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,iBAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3F,CAAC;QAED;;;WAGG;QACO,4CAA2B,GAArC,UAAsC,CAAa;YAC/C,iBAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACtE,CAAC;QAED;;;WAGG;QACO,6CAA4B,GAAtC,UAAuC,CAAa;YAChD,iBAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrE,CAAC;QAED;;;WAGG;QACO,6BAAY,GAAtB,UAAuB,CAAa;YAChC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,mBAAmB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,KAAK,CAAC,CAAC,CAAC;YACvF,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,mBAAmB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QACjJ,CAAC;QAED;;;;WAIG;QACO,oCAAmB,GAA7B,UAA8B,CAAa,EAAE,GAAgB;YACzD,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC1B,CAAC;QACL,CAAC;QAED;;;;WAIG;QACO,gCAAe,GAAzB,UAA0B,CAAa,EAAE,GAAgB;YACrD,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAqB,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;gBACnD,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC1B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC3B,CAAC;QACL,CAAC;QAED;;;;;WAKG;QACH,yBAAQ,GAAR,UAAS,GAAgB,EAAE,CAAc;YACrC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpF,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;gBAC7D,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,IAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,KAAK,GAAG,CAAC;YAC1C,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACX,IAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;gBAC1C,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;oBACV,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;gBAC/B,CAAC;YACL,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAKD,sBAAI,+BAAW;YAHf;;eAEG;iBACH;gBACI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAuB,CAAC;YACjE,CAAC;iBACD,UAAgB,KAAK;gBACjB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACjE,CAAC;;;WAHA;QAUD;;;;;WAKG;QACH,0BAAS,GAAT,UAAU,GAAgB,EAAE,CAAc,EAAE,QAAiB;YACzD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;gBACzD,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;YACrC,EAAE,CAAC,CAAC,WAAW,KAAK,GAAG,CAAC,CAAC,CAAC;gBACtB,MAAM,CAAC,KAAK,CAAC;YACjB,CAAC;YACD,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;YACjD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;YAC1D,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QAEO,gCAAe,GAAvB,UAAwB,MAAsC,EAAE,MAAsC,EAAE,QAAiB;YACrH,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACT,GAAG,CAAC,WAAW,CAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;gBAC7C,MAAM,CAAC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;YAClD,CAAC;YACD,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACT,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,mBAAmB,CAAC,CAAC;gBAC1C,MAAM,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;YACjD,CAAC;YACD,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC;gBAC3E,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrC,CAAC;QACL,CAAC;QAED;;;;;;WAMG;QACH,uBAAM,GAAN,UAAO,KAAa,EAAE,MAAa,EAAE,QAAiB;YAAhC,uBAAA,EAAA,aAAa;YAC/B,IAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,0KAAqI,CAAgB,CAAC;YACxL,IAAM,OAAO,GAAG,GAAG,CAAC,SAAwB,CAAC;YAC7C,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;YAC5C,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACjB,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAyB,CAAC,CAAC;YAC5C,CAAC;YACD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC9B,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;YACvB,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YAC1C,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACT,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;YAC7C,CAAC;YACD,MAAM,CAAC,GAAG,CAAC;QACf,CAAC;QAED;;;;;WAKG;QACH,0BAAS,GAAT,UAAU,GAAgB,EAAE,QAAiB;YACzC,IAAI,CAAS,CAAC;YACd,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBAAE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAErF,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;YAC5B,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QACpD,CAAC;QAED;;;;WAIG;QACH,wBAAO,GAAP,UAAQ,QAAwB,EAAE,QAA6B;YAA/D,iBAiCC;YAjCO,yBAAA,EAAA,WAAW,IAAI,CAAC,QAAQ;YAC5B,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;YAChD,IAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,GAAG,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,UAAC,IAAiB;oBAC7C,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;gBAC9C,CAAC,CAAC,CAAC;YACP,CAAC;YACD,IAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;YACzC,IAAM,WAAW,GAAG,UAAU,GAAG,QAAQ,CAAC;YAC1C,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,SAAS,GAAG,QAAQ,CAAC;oCAChB,IAAI;gBACT,EAAE,CAAC,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC;oBACpB,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE;wBACrD,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;wBACjB,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC;oBAC7B,CAAC,EAAE,QAAQ,CAAC,CAAC;gBACjB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,IAAM,MAAM,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,EAAE,aAAa,CAAC,CAAC;oBACnE,IAAM,QAAQ,GAAG,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,MAAM,EAAE,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,QAAQ,CAAC,EAAE,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;oBACtK,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE;wBACnC,EAAE,CAAC,CAAC,EAAE,SAAS,IAAI,CAAC,CAAC,CAAC,CAAC;4BACnB,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;wBAChD,CAAC;oBACL,CAAC,EAAE,QAAQ,CAAC,CAAC;oBACb,KAAK,IAAI,QAAQ,GAAG,MAAM,CAAC;gBAC/B,CAAC;YACL,CAAC;YAhBD,GAAG,CAAC,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,UAAyB,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,WAA0B;wBAAxF,IAAI;aAgBZ;YACD,EAAE,CAAC,CAAC,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC;gBACrB,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;YACjD,CAAC;QACL,CAAC;QAED;;;;WAIG;QACH,2BAAU,GAAV,UAAW,GAAmC,EAAE,QAAiB;YAC7D,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,GAAG,CAAC,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,UAAyB,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,WAA0B,EAAE,CAAC;gBAChG,IAAM,QAAQ,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,KAAM,CAAC,IAAI,CAAC,CAAC;gBACpD,EAAE,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;oBACf,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;oBACxD,+BAAsB,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;oBACvD,KAAK,CAAC;gBACV,CAAC;gBACD,KAAK,IAAI,QAAQ,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,YAAY,EAAE,aAAa,CAAC,CAAC;YAC5E,CAAC;QACL,CAAC;QAxQuB;YAAvB,cAAI,CAAC,gBAAgB,CAAC;kDAAyB;QAKvB;YAAxB,cAAI,CAAC,iBAAiB,CAAC;mDAA0B;QAKrB;YAA5B,cAAI,CAAC,qBAAqB,CAAC;iDAAwB;QAK5B;YAAvB,cAAI,CAAC,gBAAgB,CAAC;4CAAmB;QAKnB;YAAtB,cAAI,CAAC,eAAe,CAAC;2CAAkB;QAqP5C,aAAC;KAAA,AAxVD,CAAoC,iBAAO,GAwV1C;sBAxVoB,MAAM;IA0V3B,MAAM,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC;IACnC,MAAM,CAAC,SAAS,CAAC,WAAW,GAAG,GAAG,CAAC"}