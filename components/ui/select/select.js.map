{"version":3,"file":"select.js","sources":["select.tsx"],"sourcesContent":["import * as dom from \"web/dom\";\r\nimport Control, { VNode, bind } from \"ui/control\";\r\nimport Picker from \"ui/picker\";\r\nimport ListBox, { ListItem } from \"ui/listBox\";\r\nimport ComboBox from \"ui/comboBox\";\r\n\r\n/**\r\n * 表示一个选择框。\r\n */\r\nexport default class Select extends ComboBox {\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.input.readOnly = true;\r\n        dom.addClass(this.elem, \"x-picker-select\");\r\n    }\r\n\r\n    protected createDropDown() {\r\n        const dropDown = super.createDropDown();\r\n        dropDown.event = \"click\";\r\n        return dropDown;\r\n    }\r\n\r\n    protected handleButtonClick() {\r\n        // FIXME: (this.dropDown as any)._toggle 是什么?\r\n        this.dropDown.toggle((this.dropDown as any)._toggle);\r\n    }\r\n\r\n    /**\r\n     * 选中的第一项。\r\n     */\r\n    get selectedItem() {\r\n        return (this as any)._selectedItem;\r\n    }\r\n    set selectedItem(value) {\r\n        (this as any)._selectedItem = value;\r\n        this.input.value = value ? value.content : \"\";\r\n    }\r\n\r\n    get value() {\r\n        if ((this as any)._selectedItem) {\r\n            return (this as any)._selectedItem.key;\r\n        }\r\n        return this.input.value;\r\n    }\r\n    set value(value) {\r\n        const item = (this as any)._selectedItem = this.menu.findItemByKey(value);\r\n        if (item) {\r\n            value = item.content;\r\n        }\r\n        this.input.value = value;\r\n    }\r\n\r\n    get defaultValue() {\r\n        if ((this as any)._selectedItem) {\r\n            return (this as any)._selectedItem.key;\r\n        }\r\n        return this.input.defaultValue;\r\n    }\r\n    set defaultValue(value) {\r\n        const item = (this as any)._selectedItem = this.menu.findItemByKey(value);\r\n        if (item) {\r\n            value = item.content;\r\n        }\r\n        this.input.defaultValue = value;\r\n    }\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;IAMA;;OAEG;IACH;QAAoC,0BAAQ;QAA5C;;QA0DA,CAAC;QAxDa,qBAAI,GAAd;YACI,iBAAM,IAAI,WAAE,CAAC;YACb,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC;YAC3B,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;QAC/C,CAAC;QAES,+BAAc,GAAxB;YACI,IAAM,QAAQ,GAAG,iBAAM,cAAc,WAAE,CAAC;YACxC,QAAQ,CAAC,KAAK,GAAG,OAAO,CAAC;YACzB,MAAM,CAAC,QAAQ,CAAC;QACpB,CAAC;QAES,kCAAiB,GAA3B;YACI,6CAA6C;YAC7C,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAE,IAAI,CAAC,QAAgB,CAAC,OAAO,CAAC,CAAC;QACzD,CAAC;QAKD,sBAAI,gCAAY;YAHhB;;eAEG;iBACH;gBACI,MAAM,CAAE,IAAY,CAAC,aAAa,CAAC;YACvC,CAAC;iBACD,UAAiB,KAAK;gBACjB,IAAY,CAAC,aAAa,GAAG,KAAK,CAAC;gBACpC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;YAClD,CAAC;;;WAJA;QAMD,sBAAI,yBAAK;iBAAT;gBACI,EAAE,CAAC,CAAE,IAAY,CAAC,aAAa,CAAC,CAAC,CAAC;oBAC9B,MAAM,CAAE,IAAY,CAAC,aAAa,CAAC,GAAG,CAAC;gBAC3C,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;YAC5B,CAAC;iBACD,UAAU,KAAK;gBACX,IAAM,IAAI,GAAI,IAAY,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC1E,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACP,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC;gBACzB,CAAC;gBACD,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;YAC7B,CAAC;;;WAPA;QASD,sBAAI,gCAAY;iBAAhB;gBACI,EAAE,CAAC,CAAE,IAAY,CAAC,aAAa,CAAC,CAAC,CAAC;oBAC9B,MAAM,CAAE,IAAY,CAAC,aAAa,CAAC,GAAG,CAAC;gBAC3C,CAAC;gBACD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;YACnC,CAAC;iBACD,UAAiB,KAAK;gBAClB,IAAM,IAAI,GAAI,IAAY,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;gBAC1E,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACP,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC;gBACzB,CAAC;gBACD,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC;YACpC,CAAC;;;WAPA;QASL,aAAC;IAAD,CAAC,AA1DD,CAAoC,kBAAQ,GA0D3C"}