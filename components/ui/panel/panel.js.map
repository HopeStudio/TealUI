{"version":3,"file":"panel.js","sources":["panel.tsx"],"sourcesContent":["import * as dom from \"web/dom\";\r\nimport Control, { VNode, bind, NodeLike } from \"ui/control\";\r\nimport \"typo/icon/icon.scss\";\r\nimport \"./panel.scss\";\r\n\r\n/**\r\n * 表示一个面板。\r\n */\r\nexport default class Panel extends Control {\r\n\r\n    protected render() {\r\n        return <section class=\"x-panel\">\r\n            <header class=\"x-panel-header\">\r\n                <h5></h5>\r\n            </header>\r\n            <div class=\"x-panel-body\"></div>\r\n        </section>;\r\n    }\r\n\r\n    /**\r\n     * 头部。\r\n     */\r\n    @bind(\".x-panel-header\") header: HTMLElement;\r\n\r\n    @bind(\".x-panel-body\") body: HTMLElement;\r\n\r\n    /**\r\n     * 标题。\r\n     */\r\n    @bind(\".x-panel-header h5\", \"innerHTML\") title: NodeLike;\r\n\r\n    /**\r\n     * 是否可折叠。\r\n     */\r\n    get collapsable() {\r\n        return dom.hasClass(this.elem, \"x-panel-collapsable\");\r\n    }\r\n    set collapsable(value) {\r\n        if (value !== this.collapsable) {\r\n            dom.toggleClass(this.elem, \"x-panel-collapsable\", value);\r\n            if (value) {\r\n                dom.on(this.header, \"click\", this.handleHeaderClick, this);\r\n            } else {\r\n                dom.off(this.header, \"click\", this.handleHeaderClick, this);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理标题点击事件。\r\n     */\r\n    protected handleHeaderClick() {\r\n        this.toggleCollapse();\r\n    }\r\n\r\n    /**\r\n     * 是否已折叠。\r\n     */\r\n    @bind(\"\", \"class\", \"x-panel-collapsed\") collapsed: boolean;\r\n\r\n    /**\r\n     * 切换面板的折叠状态。\r\n     * @param value 如果为 true 则强制折叠；如果为 false 则强制展开。\r\n     */\r\n    toggleCollapse(value = !this.collapsed) {\r\n        if (value !== this.collapsed) {\r\n            if (this.onCollapseChange && this.onCollapseChange(value, this) === false) {\r\n                return;\r\n            }\r\n            dom.addClass(this.elem, \"x-panel-collapsing\");\r\n            this.collapsed = value;\r\n            dom.toggle(this.body, !value, \"height\", () => {\r\n                dom.removeClass(this.elem, \"x-panel-collapsing\");\r\n                if (value) {\r\n                    this.body.style.display = \"\";\r\n                }\r\n            }, this.duration);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 即将切换折叠事件。\r\n     * @param value 如果为 true 表示即将折叠。否则表示即将展开。\r\n     * @param sender 事件源。\r\n     * @return 如果返回 false 则禁用折叠。\r\n     */\r\n    onCollapseChange: (value: boolean, sender: this) => boolean | void;\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;IAKA;;OAEG;IACH;QAAmC,yBAAO;QAA1C;;QAgFA,CAAC;QA9Ea,sBAAM,GAAhB;YACI,MAAM,CAAC,oCAAS,KAAK,EAAC,SAAS;gBAC3B,mCAAQ,KAAK,EAAC,gBAAgB;oBAC1B,kCAAS,CACJ;gBACT,gCAAK,KAAK,EAAC,cAAc,GAAO,CAC1B,CAAC;QACf,CAAC;QAiBD,sBAAI,8BAAW;YAHf;;eAEG;iBACH;gBACI,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,qBAAqB,CAAC,CAAC;YAC1D,CAAC;iBACD,UAAgB,KAAK;gBACjB,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC7B,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,qBAAqB,EAAE,KAAK,CAAC,CAAC;oBACzD,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACR,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;oBAC/D,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;oBAChE,CAAC;gBACL,CAAC;YACL,CAAC;;;WAVA;QAYD;;WAEG;QACO,iCAAiB,GAA3B;YACI,IAAI,CAAC,cAAc,EAAE,CAAC;QAC1B,CAAC;QAOD;;;WAGG;QACH,8BAAc,GAAd,UAAe,KAAuB;YAAtC,iBAcC;YAdc,sBAAA,EAAA,SAAS,IAAI,CAAC,SAAS;YAClC,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC3B,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;oBACxE,MAAM,CAAC;gBACX,CAAC;gBACD,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC;gBAC9C,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;gBACvB,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE;oBACpC,GAAG,CAAC,WAAW,CAAC,KAAI,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC;oBACjD,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACR,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;oBACjC,CAAC;gBACL,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACtB,CAAC;QACL,CAAC;QAxDwB;YAAxB,cAAI,CAAC,iBAAiB,CAAC;6CAAqB;QAEtB;YAAtB,cAAI,CAAC,eAAe,CAAC;2CAAmB;QAKA;YAAxC,cAAI,CAAC,oBAAoB,EAAE,WAAW,CAAC;4CAAiB;QA6BjB;YAAvC,cAAI,CAAC,EAAE,EAAE,OAAO,EAAE,mBAAmB,CAAC;gDAAoB;QA8B/D,YAAC;KAAA,AAhFD,CAAmC,iBAAO,GAgFzC;sBAhFoB,KAAK"}