{"version":3,"file":"ie8-shim.js","sources":["ie8-shim.js"],"sourcesContent":["import \"./atob-shim\";\r\n\r\n/*@cc_on if(!+\"\\v1\") {\r\n\r\n(function () {\r\n\r\n    /// 用于创建一个异步请求。\r\n    /// @example new XMLHttpRequest()\r\n    /// @since ES4\r\n    XMLHttpRequest = function () {\r\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n\r\n    /// 为当前元素添加指定监听器。\r\n    /// @since ES4\r\n    /// @memberOf Element.prototype\r\n    /// @example document.body.addEventListener(\"click\", function() {}, false)\r\n    addEventListener = function (eventName, eventHandler) {\r\n        this.attachEvent(\"on\" + eventName, eventHandler);\r\n    };\r\n\r\n    /// 为当前元素移除指定监听器。\r\n    /// @since ES4\r\n    /// @memberOf Element.prototype\r\n    /// @example document.body.removeEventListener(\"click\", function() {}, false)\r\n    removeEventListener = function (eventName, eventHandler) {\r\n        this.detachEvent(\"on\" + eventName, eventHandler);\r\n    };\r\n\r\n    getComputedStyle = function (el, pseudo) {\r\n        var r = el.currentStyle;\r\n        Object.defineProperty(r, \"styleFloat\", {\r\n            get: function () {\r\n                return this.cssFloat;\r\n            }\r\n        });\r\n        return r;\r\n    };\r\n\r\n    // 让 IE6-8 支持 HTML5 新标签。\r\n    function createHTML5Tags(doc) {\r\n        \"abbr article aside audio bdi canvas data datalist details figcaption figure footer header mark meter nav output progress section summary time video\".replace(/\\w+/g, function (tagName) {\r\n            doc.createElement(tagName);\r\n        });\r\n    }\r\n    createHTML5Tags(document);\r\n\r\n    // 定义一个属性。\r\n    function defineProperties(obj, properties) {\r\n        for (var key in properties) {\r\n            var property = properties[key];\r\n            if (typeof property === \"function\") {\r\n                obj[key] = property;\r\n            } else {\r\n                Object.defineProperty(obj, key, property);\r\n            }\r\n        }\r\n    }\r\n\r\n    Document = window.Document || HTMLDocument;\r\n\r\n    var createDocumentFragment = Document.prototype.createDocumentFragment;\r\n    defineProperties(Document.prototype, {\r\n\r\n        createDocumentFragment: function () {\r\n            var fragment = createDocumentFragment.call(this);\r\n            createHTML5Tags(fragment);\r\n            return fragment;\r\n        },\r\n\r\n        addEventListener: addEventListener,\r\n        removeEventListener: removeEventListener,\r\n\r\n        getElementsByClassName: function (classNames) {\r\n            return this.querySelectorAll(\".\" + classNames.replace(/^\\s+|\\s*$/g, \"\").replace(/\\s+/, \".\"));\r\n        },\r\n\r\n        /// 获取当前文档的所属窗口。\r\n        /// @example document.defaultView // window\r\n        /// @since ES4\r\n        defaultView: {\r\n            get: function () {\r\n                return this.parentWindow;\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    defineProperties(Element.prototype, {\r\n\r\n        addEventListener: addEventListener,\r\n        removeEventListener: removeEventListener,\r\n        getElementsByClassName: document.getElementsByClassName,\r\n\r\n        /// 获取当前节点的所属文档。\r\n        /// @example document.body.ownerDocument // document\r\n        /// @since ES4\r\n        ownerDocument: {\r\n            get: function () {\r\n                return this.document;\r\n            }\r\n        },\r\n\r\n        /// 获取或设置当前元素的内部文本。\r\n        /// @example \r\n        /// document.body.textContent\r\n        /// document.body.textContent = \"text\"\r\n        /// @since ES4\r\n        textContent: {\r\n            get: function () {\r\n                return this.innerText;\r\n            },\r\n            set: function (value) {\r\n                this.innerText = value;\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    defineProperties(Event.prototype, {\r\n\r\n        /// 阻止当前事件冒泡。\r\n        /// @memberOf Event.prototype\r\n        /// @example \r\n        /// document.onclick = function(e) { \r\n        ///     e.stopPropagation();\r\n        /// }\r\n        /// @since ES4\r\n        stopPropagation: function () {\r\n            this.cancelBubble = true;\r\n        },\r\n\r\n        /// 阻止事件默认行为。\r\n        /// @memberOf Event.prototype\r\n        /// @example \r\n        /// document.onclick = function(e){ \r\n        ///     e.preventDefault();\r\n        /// }\r\n        /// @since ES4\r\n        preventDefault: function () {\r\n            this.returnValue = false;\r\n        },\r\n\r\n        /// 获取事件发生的目标元素。\r\n        /// @memberOf Event.prototype\r\n        /// @name target\r\n        /// @example \r\n        /// document.onclick = function(e){ \r\n        ///     console.log(e.target);\r\n        /// }\r\n        /// @since ES4\r\n        target: {\r\n            get: function () {\r\n                return this.srcElement;\r\n            }\r\n        },\r\n\r\n        /// 获取事件发生的相关元素。\r\n        /// @memberOf Event.prototype\r\n        /// @name relatedTarget\r\n        /// @example \r\n        /// document.onclick = function(e){ \r\n        ///     console.log(e.relatedTarget);\r\n        /// }\r\n        /// @since ES4\r\n        relatedTarget: {\r\n            get: function () {\r\n                return this.toElement || this.fromElement;\r\n            }\r\n        },\r\n\r\n        /// 获取事件发生的鼠标按键。\r\n        /// @memberOf Event.prototype\r\n        /// @name which\r\n        /// @example \r\n        /// document.onclick = function(e){ \r\n        ///     console.log(e.which);\r\n        /// }\r\n        /// @since ES4\r\n        which: {\r\n            get: function () {\r\n                return this.button & 1 ? 1 : (this.button & 2 ? 3 : (this.button & 4 ? 2 : 0));\r\n            }\r\n        },\r\n\r\n        /// 获取事件发生的鼠标屏幕水平坐标。\r\n        /// @memberOf Event.prototype\r\n        /// @name pageX\r\n        /// @example \r\n        /// document.onclick = function(e){ \r\n        ///     console.log(e.pageX);\r\n        /// }\r\n        /// @since ES4\r\n        pageX: {\r\n            get: function () {\r\n                return this.x;\r\n            }\r\n        },\r\n\r\n        /// 获取事件发生的鼠标屏幕垂直坐标。\r\n        /// @memberOf Event.prototype\r\n        /// @name pageY\r\n        /// @example \r\n        /// document.onclick = function(e){ \r\n        ///     console.log(e.pageY);\r\n        /// }\r\n        /// @since ES4\r\n        pageY: {\r\n            get: function () {\r\n                return this.y;\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    defineProperties(TextRectangle.prototype, {\r\n\r\n        /// 获取当前区域的宽。\r\n        /// @memberOf TextRectangle.prototype\r\n        /// @name width\r\n        /// @example document.body.getBoundingClientRect().width\r\n        /// @since ES4\r\n        width: {\r\n            get: function () {\r\n                return this.right - this.left;\r\n            }\r\n        },\r\n\r\n        /// 获取当前区域的高。\r\n        /// @memberOf TextRectangle.prototype\r\n        /// @name height\r\n        /// @example document.body.getBoundingClientRect().height\r\n        /// @since ES4\r\n        height: {\r\n            get: function () {\r\n                return this.bottom - this.top;\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n\r\n} @*/\r\n"],"mappings":";;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAiPK"}