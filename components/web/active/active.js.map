{"version":3,"file":"active.js","sources":["active.ts"],"sourcesContent":["import { on, off } from \"web/dom\";\r\n\r\n/**\r\n * 设置指针按住时的回调函数。\r\n * @param elem 相关的元素。\r\n * @param pointerDown 指针按下后的回调函数。\r\n * @param pointerUp 指针松开后的回调函数。\r\n * @param duration 当指针保持按下状态时持续触发按下事件的间隔时间。\r\n * @example active(elem, () => console.log(\"下\"), () => console.log(\"上\"))\r\n */\r\nexport default function active(elem: HTMLElement, pointerDown?: (e: MouseEvent) => void, pointerUp?: (e: MouseEvent) => void, duration = 50) {\r\n    let timer: any;\r\n    const handlePointUp = (e: MouseEvent) => {\r\n        if (timer) {\r\n            clearInterval(timer);\r\n            timer = 0;\r\n        }\r\n        off(document, \"pointerup\", handlePointUp);\r\n        pointerUp && pointerUp(e);\r\n    };\r\n    on(elem, \"pointerdown\", (e: MouseEvent) => {\r\n        on(document, \"pointerup\", handlePointUp);\r\n        if (pointerDown) {\r\n            timer = setInterval(pointerDown, duration, e);\r\n            pointerDown(e);\r\n        }\r\n    });\r\n}\r\n"],"mappings":";;;IAEA;;;;;;;OAOG;IACH,gBAA+B,IAAiB,EAAE,WAAqC,EAAE,SAAmC,EAAE,QAAa;QAAb,yBAAA,EAAA,aAAa;QACvI,IAAI,KAAU,CAAC;QACf,IAAM,aAAa,GAAG,UAAC,CAAa;YAChC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBACR,aAAa,CAAC,KAAK,CAAC,CAAC;gBACrB,KAAK,GAAG,CAAC,CAAC;YACd,CAAC;YACD,SAAG,CAAC,QAAQ,EAAE,WAAW,EAAE,aAAa,CAAC,CAAC;YAC1C,SAAS,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC;QAC9B,CAAC,CAAC;QACF,QAAE,CAAC,IAAI,EAAE,aAAa,EAAE,UAAC,CAAa;YAClC,QAAE,CAAC,QAAQ,EAAE,WAAW,EAAE,aAAa,CAAC,CAAC;YACzC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBACd,KAAK,GAAG,WAAW,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC;gBAC9C,WAAW,CAAC,CAAC,CAAC,CAAC;YACnB,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAjBD,yBAiBC"}